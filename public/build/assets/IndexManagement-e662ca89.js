import{p as ae,r as A,s as b,G as re,H as se,I as ue,v as U,m as ce,J as de,K as me,L as pe,M as fe,N as ve,P as ge,R as ee,S as ye,U as _e,V as he,Q as be,o as z,c as S,a as o,u as h,w as q,F as E,Z as xe,b as l,k as qe,d as R,e as V,f as T,i as I,O as te,T as le,t as B,h as L}from"./app-6de39dd8.js";import{Q as Ve,a as M}from"./QStepper-c46ba29f.js";import{Q as Fe}from"./QChip-16675ef6.js";import{h as Ce,_ as ze}from"./MainLayout-53cbe64d.js";import{Q as Se}from"./QImg-5d5fde7f.js";import{u as ke}from"./use-quasar-ca0b4894.js";function P(t,g,c,D){const d=[];return t.forEach(n=>{D(n)===!0?d.push(n):g.push({failedPropValidation:c,file:n})}),d}function W(t){t&&t.dataTransfer&&(t.dataTransfer.dropEffect="copy"),se(t)}const $e={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Ae=["rejected"];function De({editable:t,dnd:g,getFileInput:c,addFilesToQueue:D}){const{props:d,emit:n,proxy:p}=ae(),F=A(null),N=b(()=>d.accept!==void 0?d.accept.split(",").map(a=>(a=a.trim(),a==="*"?"*/":(a.endsWith("/*")&&(a=a.slice(0,a.length-1)),a.toUpperCase()))):null),k=b(()=>parseInt(d.maxFiles,10)),w=b(()=>parseInt(d.maxTotalSize,10));function f(a){if(t.value)if(a!==Object(a)&&(a={target:null}),a.target!==null&&a.target.matches('input[type="file"]')===!0)a.clientX===0&&a.clientY===0&&re(a);else{const C=c();C&&C!==a.target&&C.click(a)}}function s(a){t.value&&a&&D(null,a)}function e(a,C,Q,O){let r=Array.from(C||a.target.files);const x=[],j=()=>{x.length!==0&&n("rejected",x)};if(d.accept!==void 0&&N.value.indexOf("*/")===-1&&(r=P(r,x,"accept",u=>N.value.some(v=>u.type.toUpperCase().startsWith(v)||u.name.toUpperCase().endsWith(v))),r.length===0))return j();if(d.maxFileSize!==void 0){const u=parseInt(d.maxFileSize,10);if(r=P(r,x,"max-file-size",v=>v.size<=u),r.length===0)return j()}if(d.multiple!==!0&&r.length!==0&&(r=[r[0]]),r.forEach(u=>{u.__key=u.webkitRelativePath+u.lastModified+u.name+u.size}),O===!0){const u=Q.map(v=>v.__key);r=P(r,x,"duplicate",v=>u.includes(v.__key)===!1)}if(r.length===0)return j();if(d.maxTotalSize!==void 0){let u=O===!0?Q.reduce((v,Y)=>v+Y.size,0):0;if(r=P(r,x,"max-total-size",v=>(u+=v.size,u<=w.value)),r.length===0)return j()}if(typeof d.filter=="function"){const u=d.filter(r);r=P(r,x,"filter",v=>u.includes(v))}if(d.maxFiles!==void 0){let u=O===!0?Q.length:0;if(r=P(r,x,"max-files",()=>(u++,u<=k.value)),r.length===0)return j()}if(j(),r.length!==0)return r}function y(a){W(a),g.value!==!0&&(g.value=!0)}function m(a){se(a),(a.relatedTarget!==null||ue.is.safari!==!0?a.relatedTarget!==F.value:document.elementsFromPoint(a.clientX,a.clientY).includes(F.value)===!1)===!0&&(g.value=!1)}function H(a){W(a);const C=a.dataTransfer.files;C.length!==0&&D(null,C),g.value=!1}function X(a){if(g.value===!0)return U("div",{ref:F,class:`q-${a}__dnd absolute-full`,onDragenter:W,onDragover:W,onDragleave:m,onDrop:H})}return Object.assign(p,{pickFiles:f,addFiles:s}),{pickFiles:f,addFiles:s,onDragover:y,onDragleave:m,processFiles:e,getDndNode:X,maxFilesNumber:k,maxTotalSizeNumber:w}}const je=ce({name:"QFile",inheritAttrs:!1,props:{...de,...me,...$e,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...pe,...Ae],setup(t,{slots:g,emit:c,attrs:D}){const{proxy:d}=ae(),n=fe(),p=A(null),F=A(!1),N=ve(t),{pickFiles:k,onDragover:w,onDragleave:f,processFiles:s,getDndNode:e}=De({editable:n.editable,dnd:F,getFileInput:J,addFilesToQueue:Z}),y=ge(t),m=b(()=>Object(t.modelValue)===t.modelValue?"length"in t.modelValue?Array.from(t.modelValue):[t.modelValue]:[]),H=b(()=>ee(m.value)),X=b(()=>m.value.map(i=>i.name).join(", ")),a=b(()=>Ce(m.value.reduce((i,_)=>i+_.size,0))),C=b(()=>({totalSize:a.value,filesNumber:m.value.length,maxFiles:t.maxFiles})),Q=b(()=>({tabindex:-1,type:"file",title:"",accept:t.accept,capture:t.capture,name:N.value,...D,id:n.targetUid.value,disabled:n.editable.value!==!0})),O=b(()=>"q-file q-field--auto-height"+(F.value===!0?" q-file--dnd":"")),r=b(()=>t.multiple===!0&&t.append===!0);function x(i){const _=m.value.slice();_.splice(i,1),u(_)}function j(i){const _=m.value.indexOf(i);_>-1&&x(_)}function u(i){c("update:modelValue",t.multiple===!0?i:i[0])}function v(i){i.keyCode===13&&he(i)}function Y(i){(i.keyCode===13||i.keyCode===32)&&k(i)}function J(){return p.value}function Z(i,_){const $=s(i,_,m.value,r.value),G=J();G!=null&&(G.value=""),$!==void 0&&((t.multiple===!0?t.modelValue&&$.every(ie=>m.value.includes(ie)):t.modelValue===$[0])||u(r.value===!0?m.value.concat($):$))}function K(){return[U("input",{class:[t.inputClass,"q-file__filler"],style:t.inputStyle})]}function oe(){if(g.file!==void 0)return m.value.length===0?K():m.value.map((_,$)=>g.file({index:$,file:_,ref:this}));if(g.selected!==void 0)return m.value.length===0?K():g.selected({files:m.value,ref:this});if(t.useChips===!0)return m.value.length===0?K():m.value.map((_,$)=>U(Fe,{key:"file-"+$,removable:n.editable.value,dense:!0,textColor:t.color,tabindex:t.tabindex,onRemove:()=>{x($)}},()=>U("span",{class:"ellipsis",textContent:_.name})));const i=t.displayValue!==void 0?t.displayValue:X.value;return i.length!==0?[U("div",{class:t.inputClass,style:t.inputStyle,textContent:i})]:K()}function ne(){const i={ref:p,...Q.value,...y.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:Z};return t.multiple===!0&&(i.multiple=!0),U("input",i)}return Object.assign(n,{fieldClass:O,emitValue:u,hasValue:H,inputRef:p,innerValue:m,floatingLabel:b(()=>H.value===!0||ee(t.displayValue)),computedCounter:b(()=>{if(t.counterLabel!==void 0)return t.counterLabel(C.value);const i=t.maxFiles;return`${m.value.length}${i!==void 0?" / "+i:""} (${a.value})`}),getControlChild:()=>e("file"),getControl:()=>{const i={ref:n.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:t.tabindex};return n.editable.value===!0&&Object.assign(i,{onDragover:w,onDragleave:f,onKeydown:v,onKeyup:Y}),U("div",i,[ne()].concat(oe()))}}),Object.assign(d,{removeAtIndex:x,removeFile:j,getNativeElement:()=>p.value}),ye(d,"nativeEl",()=>p.value),_e(n)}}),we={class:"row justify-center q-px-md q-py-lg"},Ue={class:"col-xs-12 col-sm-12 col-md-9"},Ne={class:"row"},Ee=l("div",{class:"col-sm-6"},[l("h5",{class:"title-form"},"Rendicion")],-1),Pe={class:"col-sm-6 text-right q-gutter-sm"},Ie={class:"row q-col-gutter-md q-mt-xs"},Qe={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},Oe={class:"form-label",for:"device_name"},Re=l("span",{class:"text-red"},"*",-1),Te={class:"row"},Be=l("div",{class:"col-sm-6"},[l("h5",{class:"title-form"},"Detalle Rendición")],-1),Le={class:"col-sm-6 text-right q-gutter-sm"},Me={class:"row q-col-gutter-md q-mt-xs"},He={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},Ke={class:"form-label",for:"device_name"},We=l("span",{class:"text-red"},"*",-1),Xe={class:"row"},Ye=l("div",{class:"col-sm-6"},[l("h5",{class:"title-form"},"Empleados")],-1),Ge={class:"col-sm-6 text-right q-gutter-sm"},Je={class:"row q-col-gutter-md q-mt-xs"},Ze={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},et={class:"form-label",for:"device_name"},tt=l("span",{class:"text-red"},"*",-1),lt={class:"row"},at=l("div",{class:"col-sm-6"},[l("h5",{class:"title-form"},"Proveedores")],-1),st={class:"col-sm-6 text-right q-gutter-sm"},ot={class:"row q-col-gutter-md q-mt-xs"},nt={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},it={class:"form-label",for:"device_name"},rt=l("span",{class:"text-red"},"*",-1),ut={class:"row"},ct=l("div",{class:"col-sm-6"},[l("h5",{class:"title-form"},"Datos Empresariales")],-1),dt={class:"col-sm-6 text-right q-gutter-sm"},mt={class:"row q-col-gutter-md q-mt-xs"},pt={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},ft={class:"form-label",for:"device_name"},vt=l("span",{class:"text-red"},"*",-1),gt={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},yt=l("div",{class:"form-label",for:"device_name"},[I(" Logo Empresa "),l("span",{class:"text-red"},"*")],-1),_t={class:"text-center q-mt-md"},Ct={__name:"IndexManagement",props:{title:String,errors:Object},setup(t){const g=ke(),c=be();let D=A(c.props.flash.message),d=A(c.props.flash.type),n=A({accountability:c.props.accountability,accountability_detail:c.props.accountability_detail,employee:c.props.employee,suppliers:c.props.suppliers,company:c.props.company,url:c.props.url}),p=A(1);const F=A(null);A(""),A({card:!1});function N(f){g.notify({type:"negative",message:"Es necesario que seleccione una archivo tipo imagen"})}function k(){const f=new FormData;f.append("image",F.value),F.value?te.post(le("panel.management.logo"),f,{forceFormData:!0,onSuccess:()=>{w()}}):w()}function w(){te.post(le("panel.management.update"),{accountability:n.value.accountability,accountability_detail:n.value.accountability_detail,employee:n.value.employee,suppliers:n.value.suppliers},{onSuccess:()=>{D.value=c.props.flash.message,d.value=c.props.flash.type,g.notify({type:d.value,message:D.value}),n.value.accountability=c.props.accountability,n.value.accountability_detail=c.props.accountability_detail,n.value.employee=c.props.employee,n.value.suppliers=c.props.suppliers,n.value.company=c.props.company,n.value.url=c.props.url}})}return(f,s)=>(z(),S(E,null,[o(h(xe),{title:t.title},null,8,["title"]),o(ze,null,{default:q(()=>[l("div",we,[l("div",Ue,[o(Ve,{modelValue:h(p),"onUpdate:modelValue":s[13]||(s[13]=e=>qe(p)?p.value=e:p=e),"header-nav":"",ref:"stepper",color:"primary",animated:"",flat:"","alternative-labels":"",class:"backgroup-theme"},{default:q(()=>[o(M,{name:1,title:"Datos Usuario",icon:"settings",done:h(p)>1},{default:q(()=>[o(R,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:q(()=>[l("div",Ne,[Ee,l("div",Pe,[o(V,{onClick:s[0]||(s[0]=e=>f.$refs.stepper.next()),color:"primary",outline:"","no-caps":"",size:"12px",label:"Continuar"}),o(V,{onClick:s[1]||(s[1]=e=>k()),color:"primary","no-caps":"",size:"12px",label:"Actualizar"})])]),l("div",Ie,[(z(!0),S(E,null,T(h(n).accountability,e=>(z(),S("div",Qe,[l("div",Oe,[I(B(e.label)+" ",1),Re]),o(L,{modelValue:e.value,"onUpdate:modelValue":y=>e.value=y,dense:"",outlined:"",type:e.type,class:"input-theme"},null,8,["modelValue","onUpdate:modelValue","type"])]))),256))])]),_:1})]),_:1},8,["done"]),o(M,{name:2,title:"Campos Rendición",icon:"settings",done:h(p)>1},{default:q(()=>[o(R,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:q(()=>[l("div",Te,[Be,l("div",Le,[o(V,{flat:"",color:"primary",onClick:s[2]||(s[2]=e=>f.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),o(V,{onClick:s[3]||(s[3]=e=>f.$refs.stepper.next()),color:"primary",outline:"","no-caps":"",size:"12px",label:"Continuar"}),o(V,{onClick:s[4]||(s[4]=e=>k()),color:"primary","no-caps":"",size:"12px",label:"Actualizar"})])]),l("div",Me,[(z(!0),S(E,null,T(h(n).accountability_detail,e=>(z(),S("div",He,[l("div",Ke,[I(B(e.label)+" ",1),We]),o(L,{modelValue:e.value,"onUpdate:modelValue":y=>e.value=y,dense:"",outlined:"",type:e.type,class:"input-theme"},null,8,["modelValue","onUpdate:modelValue","type"])]))),256))])]),_:1})]),_:1},8,["done"]),o(M,{name:3,title:"Empleados",icon:"settings",done:h(p)>2},{default:q(()=>[o(R,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:q(()=>[l("div",Xe,[Ye,l("div",Ge,[o(V,{flat:"",color:"primary",onClick:s[5]||(s[5]=e=>f.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),o(V,{onClick:s[6]||(s[6]=e=>f.$refs.stepper.next()),color:"primary",outline:"","no-caps":"",size:"12px",label:"Continuar"}),o(V,{onClick:s[7]||(s[7]=e=>k()),color:"primary","no-caps":"",size:"12px",label:"Actualizar"})])]),l("div",Je,[(z(!0),S(E,null,T(h(n).employee,e=>(z(),S("div",Ze,[l("div",et,[I(B(e.label)+" ",1),tt]),o(L,{modelValue:e.value,"onUpdate:modelValue":y=>e.value=y,dense:"",outlined:"",type:e.type,class:"input-theme"},null,8,["modelValue","onUpdate:modelValue","type"])]))),256))])]),_:1})]),_:1},8,["done"]),o(M,{name:4,title:"Proveedores",icon:"settings",done:h(p)>3},{default:q(()=>[o(R,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:q(()=>[l("div",lt,[at,l("div",st,[o(V,{flat:"",color:"primary",onClick:s[8]||(s[8]=e=>f.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),o(V,{onClick:s[9]||(s[9]=e=>k()),color:"primary","no-caps":"",size:"12px",label:"Actualizar"})])]),l("div",ot,[(z(!0),S(E,null,T(h(n).suppliers,e=>(z(),S("div",nt,[l("div",it,[I(B(e.label)+" ",1),rt]),o(L,{modelValue:e.value,"onUpdate:modelValue":y=>e.value=y,dense:"",outlined:"",type:e.type,class:"input-theme"},null,8,["modelValue","onUpdate:modelValue","type"])]))),256))])]),_:1})]),_:1},8,["done"]),o(M,{name:5,title:"Datos Empresa",icon:"settings",done:h(p)>4},{default:q(()=>[o(R,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:q(()=>[l("div",ut,[ct,l("div",dt,[o(V,{flat:"",color:"primary",onClick:s[10]||(s[10]=e=>f.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),o(V,{onClick:s[11]||(s[11]=e=>k()),color:"primary","no-caps":"",size:"12px",label:"Actualizar"})])]),l("div",mt,[(z(!0),S(E,null,T(h(n).company,e=>(z(),S("div",pt,[l("div",ft,[I(B(e.label)+" ",1),vt]),o(L,{modelValue:e.value,"onUpdate:modelValue":y=>e.value=y,dense:"",outlined:"",type:e.type,class:"input-theme"},null,8,["modelValue","onUpdate:modelValue","type"])]))),256)),l("div",gt,[yt,o(je,{modelValue:F.value,"onUpdate:modelValue":s[12]||(s[12]=e=>F.value=e),dense:"",outlined:"",accept:".jpg, image/*",class:"input-theme",onRejected:N},null,8,["modelValue"]),l("div",_t,[o(Se,{src:h(n).url,fit:"contain",width:"180px"},null,8,["src"])])])])]),_:1})]),_:1},8,["done"])]),_:1},8,["modelValue"])])])]),_:1})],64))}};export{Ct as default};
