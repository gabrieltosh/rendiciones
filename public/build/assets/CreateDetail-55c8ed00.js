import{Q as P,r as x,j as S,o as s,c as n,a,u as r,w as V,F as v,Z as D,b as l,k as R,d as z,e as g,O as U,T as q,l as T,g as c,f as _,h as p,i as C,t as b}from"./app-10529476.js";import{Q as h}from"./QSelect-b8e9a33b.js";import{Q as B,a as j}from"./QStepper-1848bff5.js";import{_ as I}from"./MainLayout-cc7c3ca8.js";import{u as L}from"./use-quasar-624edc06.js";const A={class:"row justify-center q-px-md q-py-lg"},E={class:"col-xs-12 col-sm-12 col-md-9"},G={class:"row"},H=l("div",{class:"col-sm-6"},[l("h5",{class:"title-form"},"Información General")],-1),M={class:"col-sm-6 text-right q-gutter-sm"},Z={class:"row q-col-gutter-md q-mt-xs"},J={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},K=l("div",{class:"form-label",for:"device_name"},[C(" Cuenta "),l("span",{class:"text-red"},"*")],-1),W={key:0,class:"container-error"},X={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},Y=l("div",{class:"form-label",for:"device_name"},[C(" Fecha "),l("span",{class:"text-red"},"*")],-1),ee={key:0,class:"container-error"},le={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},oe=l("div",{class:"form-label",for:"device_name"},[C(" Tipo Documento "),l("span",{class:"text-red"},"*")],-1),te={key:0,class:"container-error"},se={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},ne=l("div",{class:"form-label",for:"device_name"},[C(" Concepto "),l("span",{class:"text-red"},"*")],-1),ae={key:0,class:"container-error"},re={class:"row"},ie=l("div",{class:"col-sm-6"},[l("h5",{class:"title-form"},"Libro de Compras")],-1),ue={class:"col-sm-6 text-right q-gutter-sm"},de={class:"row q-col-gutter-md q-mt-xs"},ce={class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},me=l("div",{class:"form-label",for:"device_name"},[C(" Nº Documento "),l("span",{class:"text-red"},"*")],-1),pe={key:0,class:"container-error"},ve={key:0,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},_e=l("div",{class:"form-label",for:"device_name"}," Nº Autorización ",-1),be={key:0,class:"container-error"},fe={key:1,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},ye=l("div",{class:"form-label",for:"device_name"}," CUF ",-1),Ve={key:0,class:"container-error"},ge={key:2,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},he=l("div",{class:"form-label",for:"device_name"}," Codigo Control ",-1),xe={key:0,class:"container-error"},ke={key:3,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ce=l("div",{class:"form-label",for:"device_name"}," Razón Social ",-1),Ue={key:0,class:"container-error"},qe={key:4,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},ze=l("div",{class:"form-label",for:"device_name"}," NIT ",-1),je={key:0,class:"container-error"},Ne={class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},$e=l("div",{class:"form-label",for:"device_name"},[C(" Importe "),l("span",{class:"text-red"},"*")],-1),we={key:0,class:"container-error"},Oe={key:5,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Qe=l("div",{class:"form-label",for:"device_name"}," Descuento ",-1),Fe={key:0,class:"container-error"},Pe={key:6,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Se=l("div",{class:"form-label",for:"device_name"}," Exento ",-1),De={key:7,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Re=l("div",{class:"form-label",for:"device_name"}," Tasas ",-1),Te={key:8,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Be=l("div",{class:"form-label",for:"device_name"}," Gift Card ",-1),Ie={key:9,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Le=l("div",{class:"form-label",for:"device_name"}," Tasa Cero ",-1),Ae={key:10,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ee=l("div",{class:"form-label",for:"device_name"}," ICE ",-1),Ge={class:"row"},He=l("div",{class:"col-sm-6"},[l("h5",{class:"title-form"},"Datos Contables")],-1),Me={class:"col-sm-6 text-right q-gutter-sm"},Ze={class:"row q-col-gutter-md q-mt-xs"},Je={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},Ke=l("div",{class:"form-label",for:"device_name"}," Proyecto ",-1),We={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},Xe=l("div",{class:"form-label",for:"device_name"}," Norma Reparto 1 ",-1),Ye={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},el=l("div",{class:"form-label",for:"device_name"}," Norma Reparto 2 ",-1),ll={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},ol=l("div",{class:"form-label",for:"device_name"}," Norma Reparto 3 ",-1),tl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},sl=l("div",{class:"form-label",for:"device_name"}," Norma Reparto 4 ",-1),nl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},al=l("div",{class:"form-label",for:"device_name"}," Norma Reparto 5 ",-1),ml={__name:"CreateDetail",props:{title:String,errors:Object},setup(i){const w=L(),d=P();let N=x(d.props.flash.message),$=x(d.props.flash.type),m=x({});const f=x({accounts:null,documents:d.props.documents,suppliers:[],distribution:d.props.distribution,projects:d.props.projects});x({card:!1});let k=x(1);const t=x({account:null,account_name:null,date:null,document_id:null,document_number:null,authorization_number:null,cuf:null,control_code:null,supplier_code:null,business_name:null,nit:null,concept:null,amount:null,discount:null,excento:null,rate:null,gift_card:null,rate_zero:null,ice:null,project_code:null,distribution_rule_one:null,distribution_rule_second:null,distribution_rule_three:null,distribution_rule_four:null,distribution_rule_five:null});function O(){U.post(q("panel.accountability.manage.detail.store",[d.props.profile.id,d.props.accountability.id]),t.value,{onSuccess:()=>{N.value=d.props.flash.message,$.value=d.props.flash.type,w.notify({type:$.value,message:N.value})}})}function Q(y,o){if(y===""){o(()=>{f.value.accounts=d.props.accounts});return}o(()=>{const e=y.toLowerCase();f.value.accounts=d.props.accounts.filter(u=>u.label.toLowerCase().indexOf(e)>-1)})}S(()=>{t.value.distribution_rule_one=d.props.auth.user.distribution_rule_one,t.value.distribution_rule_second=d.props.auth.user.distribution_rule_second,t.value.distribution_rule_three=d.props.auth.user.distribution_rule_three,t.value.distribution_rule_four=d.props.auth.user.distribution_rule_four,t.value.distribution_rule_five=d.props.auth.user.distribution_rule_five});function F(){m.value=f.value.documents.find(y=>y.id==t.value.document_id)}return(y,o)=>(s(),n(v,null,[a(r(D),{title:i.title},null,8,["title"]),a(I,null,{default:V(()=>[l("div",A,[l("div",E,[a(B,{modelValue:r(k),"onUpdate:modelValue":o[32]||(o[32]=e=>R(k)?k.value=e:k=e),"header-nav":"",ref:"stepper",color:"primary",animated:"",flat:"","alternative-labels":"",class:"backgroup-theme"},{default:V(()=>[a(j,{name:1,title:"General",icon:"settings",done:r(k)>1,error:Object.keys(i.errors).length>0},{default:V(()=>[a(z,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:V(()=>[l("div",G,[H,l("div",M,[a(g,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:o[0]||(o[0]=e=>r(U).visit(r(q)("panel.accountability.manage.detail.index",[r(d).props.profile.id,r(d).props.accountability.id]))),flat:""}),Object.keys(r(m)).length>0?(s(),T(g,{key:0,onClick:o[1]||(o[1]=e=>y.$refs.stepper.next()),color:"primary","no-caps":"",size:"12px",label:"Continuar"})):c("",!0)])]),l("div",Z,[l("div",J,[K,a(h,{class:"input-theme",dense:"",outlined:"",options:f.value.accounts,modelValue:t.value.account,"onUpdate:modelValue":o[2]||(o[2]=e=>t.value.account=e),"option-value":"account_code","option-label":"label","emit-value":"","map-options":"","use-input":"","input-debounce":"0",onFilter:Q,clearable:""},null,8,["options","modelValue"]),i.errors.account?(s(),n("div",W,[(s(!0),n(v,null,_(i.errors.account,(e,u)=>(s(),n("ul",{key:u,class:"message-error"},[l("li",null,b(e),1)]))),128))])):c("",!0)]),l("div",X,[Y,a(p,{modelValue:t.value.date,"onUpdate:modelValue":o[3]||(o[3]=e=>t.value.date=e),dense:"",outlined:"",type:"date",min:r(d).props.accountability.start_date,max:r(d).props.accountability.end_date,class:"input-theme"},null,8,["modelValue","min","max"]),i.errors.date?(s(),n("div",ee,[(s(!0),n(v,null,_(i.errors.date,(e,u)=>(s(),n("ul",{key:u,class:"message-error"},[l("li",null,b(e),1)]))),128))])):c("",!0)]),l("div",le,[oe,a(h,{class:"input-theme",dense:"",outlined:"",options:f.value.documents,modelValue:t.value.document_id,"onUpdate:modelValue":[o[4]||(o[4]=e=>t.value.document_id=e),o[5]||(o[5]=e=>F())],"option-value":"id","option-label":"name","emit-value":"","map-options":""},null,8,["options","modelValue"]),i.errors.document_id?(s(),n("div",te,[(s(!0),n(v,null,_(i.errors.document_id,(e,u)=>(s(),n("ul",{key:u,class:"message-error"},[l("li",null,b(e),1)]))),128))])):c("",!0)]),l("div",se,[ne,a(p,{modelValue:t.value.concept,"onUpdate:modelValue":o[6]||(o[6]=e=>t.value.concept=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.concept?(s(),n("div",ae,[(s(!0),n(v,null,_(i.errors.concept,(e,u)=>(s(),n("ul",{key:u,class:"message-error"},[l("li",null,b(e),1)]))),128))])):c("",!0)])])]),_:1})]),_:1},8,["done","error"]),a(j,{name:2,title:"Libro Compras",icon:"eva-file-text-outline",done:r(k)>1,error:Object.keys(i.errors).length>0,disable:Object.keys(r(m)).length==0},{default:V(()=>[a(z,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:V(()=>[l("div",re,[ie,l("div",ue,[a(g,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:o[7]||(o[7]=e=>r(U).visit(r(q)("panel.accountability.manage.detail.index",[r(d).props.profile.id,r(d).props.accountability.id]))),flat:""}),a(g,{flat:"",color:"primary",onClick:o[8]||(o[8]=e=>y.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),a(g,{onClick:o[9]||(o[9]=e=>y.$refs.stepper.next()),color:"primary","no-caps":"",size:"12px",label:"Continuar"})])]),l("div",de,[l("div",ce,[me,a(p,{modelValue:t.value.document_number,"onUpdate:modelValue":o[10]||(o[10]=e=>t.value.document_number=e),dense:"",outlined:"",class:"input-theme",type:"number"},null,8,["modelValue"]),i.errors.document_number?(s(),n("div",pe,[(s(!0),n(v,null,_(i.errors.document_number,(e,u)=>(s(),n("ul",{key:u,class:"message-error"},[l("li",null,b(e),1)]))),128))])):c("",!0)]),r(m).authorization_number_status?(s(),n("div",ve,[_e,a(p,{modelValue:t.value.authorization_number,"onUpdate:modelValue":o[11]||(o[11]=e=>t.value.authorization_number=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.authorization_number?(s(),n("div",be,[(s(!0),n(v,null,_(i.errors.authorization_number,(e,u)=>(s(),n("ul",{key:u,class:"message-error"},[l("li",null,b(e),1)]))),128))])):c("",!0)])):c("",!0),r(m).cuf_status?(s(),n("div",fe,[ye,a(p,{modelValue:t.value.cuf,"onUpdate:modelValue":o[12]||(o[12]=e=>t.value.cuf=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.cuf?(s(),n("div",Ve,[(s(!0),n(v,null,_(i.errors.cuf,(e,u)=>(s(),n("ul",{key:u,class:"message-error"},[l("li",null,b(e),1)]))),128))])):c("",!0)])):c("",!0),r(m).control_code_status?(s(),n("div",ge,[he,a(p,{modelValue:t.value.control_code,"onUpdate:modelValue":o[13]||(o[13]=e=>t.value.control_code=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.control_code?(s(),n("div",xe,[(s(!0),n(v,null,_(i.errors.control_code,(e,u)=>(s(),n("ul",{key:u,class:"message-error"},[l("li",null,b(e),1)]))),128))])):c("",!0)])):c("",!0),r(m).business_name_status?(s(),n("div",ke,[Ce,a(p,{modelValue:t.value.business_name,"onUpdate:modelValue":o[14]||(o[14]=e=>t.value.business_name=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.business_name?(s(),n("div",Ue,[(s(!0),n(v,null,_(i.errors.business_name,(e,u)=>(s(),n("ul",{key:u,class:"message-error"},[l("li",null,b(e),1)]))),128))])):c("",!0)])):c("",!0),r(m).nit_status?(s(),n("div",qe,[ze,a(p,{modelValue:t.value.nit,"onUpdate:modelValue":o[15]||(o[15]=e=>t.value.nit=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.nit?(s(),n("div",je,[(s(!0),n(v,null,_(i.errors.nit,(e,u)=>(s(),n("ul",{key:u,class:"message-error"},[l("li",null,b(e),1)]))),128))])):c("",!0)])):c("",!0),l("div",Ne,[$e,a(p,{modelValue:t.value.amount,"onUpdate:modelValue":o[16]||(o[16]=e=>t.value.amount=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.amount?(s(),n("div",we,[(s(!0),n(v,null,_(i.errors.amount,(e,u)=>(s(),n("ul",{key:u,class:"message-error"},[l("li",null,b(e),1)]))),128))])):c("",!0)]),r(m).discount_status?(s(),n("div",Oe,[Qe,a(p,{modelValue:t.value.discount,"onUpdate:modelValue":o[17]||(o[17]=e=>t.value.discount=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.discount?(s(),n("div",Fe,[(s(!0),n(v,null,_(i.errors.discount,(e,u)=>(s(),n("ul",{key:u,class:"message-error"},[l("li",null,b(e),1)]))),128))])):c("",!0)])):c("",!0),r(m).exento_status?(s(),n("div",Pe,[Se,a(p,{modelValue:t.value.excento,"onUpdate:modelValue":o[18]||(o[18]=e=>t.value.excento=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0),r(m).tasas?(s(),n("div",De,[Re,a(p,{modelValue:t.value.rate,"onUpdate:modelValue":o[19]||(o[19]=e=>t.value.rate=e),type:"number",dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0),r(m).gift_card_status?(s(),n("div",Te,[Be,a(p,{modelValue:t.value.gift_card,"onUpdate:modelValue":o[20]||(o[20]=e=>t.value.gift_card=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0),r(m).rate_zero_status?(s(),n("div",Ie,[Le,a(p,{modelValue:t.value.rate_zero,"onUpdate:modelValue":o[21]||(o[21]=e=>t.value.rate_zero=e),type:"number",dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0),r(m).ice_status?(s(),n("div",Ae,[Ee,a(p,{modelValue:t.value.ice,"onUpdate:modelValue":o[22]||(o[22]=e=>t.value.ice=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0)])]),_:1})]),_:1},8,["done","error","disable"]),a(j,{name:3,title:"Contable",icon:"eva-pantone-outline",error:Object.keys(i.errors).length>0,disable:Object.keys(r(m)).length==0},{default:V(()=>[a(z,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:V(()=>[l("div",Ge,[He,l("div",Me,[a(g,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:o[23]||(o[23]=e=>r(U).visit(r(q)("panel.accountability.manage.detail.index",[r(d).props.profile.id,r(d).props.accountability.id]))),flat:""}),a(g,{flat:"",color:"primary",onClick:o[24]||(o[24]=e=>y.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),a(g,{color:"primary",label:"Crear",size:"12px","no-caps":"",onClick:o[25]||(o[25]=e=>O())})])]),l("div",Ze,[l("div",Je,[Ke,a(h,{class:"input-theme",dense:"",outlined:"",options:f.value.projects,modelValue:t.value.project_code,"onUpdate:modelValue":o[26]||(o[26]=e=>t.value.project_code=e),"option-value":"PrjCode","option-label":"PrjCode","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),l("div",We,[Xe,a(h,{class:"input-theme",dense:"",outlined:"",options:f.value.distribution[1],modelValue:t.value.distribution_rule_one,"onUpdate:modelValue":o[27]||(o[27]=e=>t.value.distribution_rule_one=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),l("div",Ye,[el,a(h,{class:"input-theme",dense:"",outlined:"",options:f.value.distribution[2],modelValue:t.value.distribution_rule_second,"onUpdate:modelValue":o[28]||(o[28]=e=>t.value.distribution_rule_second=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),l("div",ll,[ol,a(h,{class:"input-theme",dense:"",outlined:"",options:f.value.distribution[3],modelValue:t.value.distribution_rule_three,"onUpdate:modelValue":o[29]||(o[29]=e=>t.value.distribution_rule_three=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),l("div",tl,[sl,a(h,{class:"input-theme",dense:"",outlined:"",options:f.value.distribution[4],modelValue:t.value.distribution_rule_four,"onUpdate:modelValue":o[30]||(o[30]=e=>t.value.distribution_rule_four=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),l("div",nl,[al,a(h,{class:"input-theme",dense:"",outlined:"",options:f.value.distribution[5],modelValue:t.value.distribution_rule_five,"onUpdate:modelValue":o[31]||(o[31]=e=>t.value.distribution_rule_five=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])])])]),_:1})]),_:1},8,["error","disable"])]),_:1},8,["modelValue"])])])]),_:1})],64))}};export{ml as default};
