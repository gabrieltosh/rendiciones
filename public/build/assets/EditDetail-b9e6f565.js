import{Q as D,r as k,j as O,o as t,c as a,a as n,u as i,w as V,F as _,Z as R,b as o,k as S,d as z,e as g,O as U,T as q,f,g as d,h as m,i as C,t as b}from"./app-10529476.js";import{Q as x}from"./QSelect-b8e9a33b.js";import{Q as I,a as N}from"./QStepper-1848bff5.js";import{_ as T}from"./MainLayout-cc7c3ca8.js";import{u as A}from"./use-quasar-624edc06.js";const L={class:"row justify-center q-px-md q-py-lg"},B={class:"col-xs-12 col-sm-12 col-md-9"},E={class:"row"},G=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"}," Información General ")],-1),H={class:"col-sm-6 text-right q-gutter-sm"},M={class:"row q-col-gutter-md q-mt-xs"},Z={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},J=o("div",{class:"form-label",for:"device_name"},[C(" Cuenta "),o("span",{class:"text-red"},"*")],-1),K={key:0,class:"container-error"},W={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},X=o("div",{class:"form-label",for:"device_name"},[C(" Fecha "),o("span",{class:"text-red"},"*")],-1),Y={key:0,class:"container-error"},ee={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},oe=o("div",{class:"form-label",for:"device_name"},[C(" Tipo Documento "),o("span",{class:"text-red"},"*")],-1),le={key:0,class:"container-error"},se={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},te=o("div",{class:"form-label",for:"device_name"},[C(" Concepto "),o("span",{class:"text-red"},"*")],-1),ae={key:0,class:"container-error"},ne={class:"row"},re=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"},"Libro de Compras")],-1),ie={class:"col-sm-6 text-right q-gutter-sm"},ue={class:"row q-col-gutter-md q-mt-xs"},de={class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},ce=o("div",{class:"form-label",for:"device_name"},[C(" Nº Documento "),o("span",{class:"text-red"},"*")],-1),me={key:0,class:"container-error"},ve={key:0,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},pe=o("div",{class:"form-label",for:"device_name"}," Nº Autorización ",-1),_e={key:0,class:"container-error"},fe={key:1,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},be=o("div",{class:"form-label",for:"device_name"}," CUF ",-1),ye={key:0,class:"container-error"},Ve={key:2,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},ge=o("div",{class:"form-label",for:"device_name"}," Codigo Control ",-1),xe={key:0,class:"container-error"},he={key:3,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},ke=o("div",{class:"form-label",for:"device_name"}," Razón Social ",-1),Ce={key:0,class:"container-error"},Ue={key:4,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},qe=o("div",{class:"form-label",for:"device_name"}," NIT ",-1),ze={key:0,class:"container-error"},Ne={class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},$e=o("div",{class:"form-label",for:"device_name"},[C(" Importe "),o("span",{class:"text-red"},"*")],-1),je={key:0,class:"container-error"},we={key:5,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Qe=o("div",{class:"form-label",for:"device_name"}," Descuento ",-1),Fe={key:0,class:"container-error"},Pe={key:6,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},De=o("div",{class:"form-label",for:"device_name"}," Exento ",-1),Oe={key:7,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Re=o("div",{class:"form-label",for:"device_name"}," Tasas ",-1),Se={key:8,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ie=o("div",{class:"form-label",for:"device_name"}," Gift Card ",-1),Te={key:9,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ae=o("div",{class:"form-label",for:"device_name"}," Tasa Cero ",-1),Le={key:10,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Be=o("div",{class:"form-label",for:"device_name"}," ICE ",-1),Ee={class:"row"},Ge=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"},"Datos Contables")],-1),He={class:"col-sm-6 text-right q-gutter-sm"},Me={class:"row q-col-gutter-md q-mt-xs"},Ze={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},Je=o("div",{class:"form-label",for:"device_name"}," Proyecto ",-1),Ke={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},We=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 1 ",-1),Xe={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},Ye=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 2 ",-1),eo={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},oo=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 3 ",-1),lo={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},so=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 4 ",-1),to={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},ao=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 5 ",-1),mo={__name:"EditDetail",props:{title:String,errors:Object},setup(r){const w=A(),c=D();let $=k(c.props.flash.message),j=k(c.props.flash.type),p=k({});const v=k({accounts:null,documents:c.props.documents,suppliers:[],distribution:c.props.distribution,projects:c.props.projects});let h=k(1);const s=k(c.props.data);function Q(){U.post(q("panel.accountability.authorization.detail.update",[c.props.profile.id,c.props.accountability.id]),s.value,{onSuccess:()=>{$.value=c.props.flash.message,j.value=c.props.flash.type,w.notify({type:j.value,message:$.value})}})}function F(y,l){if(y===""){l(()=>{v.value.accounts=c.props.accounts});return}l(()=>{const e=y.toLowerCase();v.value.accounts=c.props.accounts.filter(u=>u.label.toLowerCase().indexOf(e)>-1)})}O(()=>{v.value.accounts=c.props.accounts,v.value.documents=c.props.documents,s.value.document_id=parseInt(s.value.document_id),p.value=v.value.documents.find(y=>y.id==s.value.document_id)});function P(){p.value=v.value.documents.find(y=>y.id==s.value.document_id)}return(y,l)=>(t(),a(_,null,[n(i(R),{title:r.title},null,8,["title"]),n(T,null,{default:V(()=>[o("div",L,[o("div",B,[n(I,{modelValue:i(h),"onUpdate:modelValue":l[32]||(l[32]=e=>S(h)?h.value=e:h=e),"header-nav":"",ref:"stepper",color:"primary",animated:"",flat:"","alternative-labels":"",class:"backgroup-theme"},{default:V(()=>[n(N,{name:1,title:"General",icon:"settings",done:i(h)>1,error:Object.keys(r.errors).length>0},{default:V(()=>[n(z,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:V(()=>[o("div",E,[G,o("div",H,[n(g,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[0]||(l[0]=e=>i(U).visit(i(q)("panel.accountability.authorization.detail.index",i(c).props.accountability.id))),flat:""}),n(g,{onClick:l[1]||(l[1]=e=>y.$refs.stepper.next()),color:"primary","no-caps":"",size:"12px",label:"Continuar"})])]),o("div",M,[o("div",Z,[J,n(x,{class:"input-theme",dense:"",outlined:"",options:v.value.accounts,modelValue:s.value.account,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value.account=e),"option-value":"account_code","option-label":"label","emit-value":"","map-options":"","use-input":"","input-debounce":"0",onFilter:F,clearable:""},null,8,["options","modelValue"]),r.errors.account?(t(),a("div",K,[(t(!0),a(_,null,f(r.errors.account,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,b(e),1)]))),128))])):d("",!0)]),o("div",W,[X,n(m,{modelValue:s.value.date,"onUpdate:modelValue":l[3]||(l[3]=e=>s.value.date=e),dense:"",outlined:"",type:"date",min:i(c).props.accountability.start_date,max:i(c).props.accountability.end_date,class:"input-theme"},null,8,["modelValue","min","max"]),r.errors.date?(t(),a("div",Y,[(t(!0),a(_,null,f(r.errors.date,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,b(e),1)]))),128))])):d("",!0)]),o("div",ee,[oe,n(x,{class:"input-theme",dense:"",outlined:"",options:v.value.documents,modelValue:s.value.document_id,"onUpdate:modelValue":[l[4]||(l[4]=e=>s.value.document_id=e),l[5]||(l[5]=e=>P())],"option-value":"id","option-label":"name","emit-value":"","map-options":""},null,8,["options","modelValue"]),r.errors.document_id?(t(),a("div",le,[(t(!0),a(_,null,f(r.errors.document_id,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,b(e),1)]))),128))])):d("",!0)]),o("div",se,[te,n(m,{modelValue:s.value.concept,"onUpdate:modelValue":l[6]||(l[6]=e=>s.value.concept=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.concept?(t(),a("div",ae,[(t(!0),a(_,null,f(r.errors.concept,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,b(e),1)]))),128))])):d("",!0)])])]),_:1})]),_:1},8,["done","error"]),n(N,{name:2,title:"Libro Compras",icon:"eva-file-text-outline",done:i(h)>1,error:Object.keys(r.errors).length>0},{default:V(()=>[n(z,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:V(()=>[o("div",ne,[re,o("div",ie,[n(g,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[7]||(l[7]=e=>i(U).visit(i(q)("panel.accountability.manage.detail.index",[i(c).props.profile.id,i(c).props.accountability.id]))),flat:""}),n(g,{flat:"",color:"primary",onClick:l[8]||(l[8]=e=>y.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),n(g,{onClick:l[9]||(l[9]=e=>y.$refs.stepper.next()),color:"primary","no-caps":"",size:"12px",label:"Continuar"})])]),o("div",ue,[o("div",de,[ce,n(m,{modelValue:s.value.document_number,"onUpdate:modelValue":l[10]||(l[10]=e=>s.value.document_number=e),dense:"",outlined:"",class:"input-theme",type:"number"},null,8,["modelValue"]),r.errors.document_number?(t(),a("div",me,[(t(!0),a(_,null,f(r.errors.document_number,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,b(e),1)]))),128))])):d("",!0)]),i(p).authorization_number_status?(t(),a("div",ve,[pe,n(m,{modelValue:s.value.authorization_number,"onUpdate:modelValue":l[11]||(l[11]=e=>s.value.authorization_number=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.authorization_number?(t(),a("div",_e,[(t(!0),a(_,null,f(r.errors.authorization_number,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,b(e),1)]))),128))])):d("",!0)])):d("",!0),i(p).cuf_status?(t(),a("div",fe,[be,n(m,{modelValue:s.value.cuf,"onUpdate:modelValue":l[12]||(l[12]=e=>s.value.cuf=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.cuf?(t(),a("div",ye,[(t(!0),a(_,null,f(r.errors.cuf,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,b(e),1)]))),128))])):d("",!0)])):d("",!0),i(p).control_code_status?(t(),a("div",Ve,[ge,n(m,{modelValue:s.value.control_code,"onUpdate:modelValue":l[13]||(l[13]=e=>s.value.control_code=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.control_code?(t(),a("div",xe,[(t(!0),a(_,null,f(r.errors.control_code,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,b(e),1)]))),128))])):d("",!0)])):d("",!0),i(p).business_name_status?(t(),a("div",he,[ke,n(m,{modelValue:s.value.business_name,"onUpdate:modelValue":l[14]||(l[14]=e=>s.value.business_name=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.business_name?(t(),a("div",Ce,[(t(!0),a(_,null,f(r.errors.business_name,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,b(e),1)]))),128))])):d("",!0)])):d("",!0),i(p).nit_status?(t(),a("div",Ue,[qe,n(m,{modelValue:s.value.nit,"onUpdate:modelValue":l[15]||(l[15]=e=>s.value.nit=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.nit?(t(),a("div",ze,[(t(!0),a(_,null,f(r.errors.nit,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,b(e),1)]))),128))])):d("",!0)])):d("",!0),o("div",Ne,[$e,n(m,{modelValue:s.value.amount,"onUpdate:modelValue":l[16]||(l[16]=e=>s.value.amount=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.amount?(t(),a("div",je,[(t(!0),a(_,null,f(r.errors.amount,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,b(e),1)]))),128))])):d("",!0)]),i(p).discount_status?(t(),a("div",we,[Qe,n(m,{modelValue:s.value.discount,"onUpdate:modelValue":l[17]||(l[17]=e=>s.value.discount=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.discount?(t(),a("div",Fe,[(t(!0),a(_,null,f(r.errors.discount,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,b(e),1)]))),128))])):d("",!0)])):d("",!0),i(p).exento_status?(t(),a("div",Pe,[De,n(m,{modelValue:s.value.excento,"onUpdate:modelValue":l[18]||(l[18]=e=>s.value.excento=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):d("",!0),i(p).tasas?(t(),a("div",Oe,[Re,n(m,{modelValue:s.value.rate,"onUpdate:modelValue":l[19]||(l[19]=e=>s.value.rate=e),type:"number",dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"])])):d("",!0),i(p).gift_card_status?(t(),a("div",Se,[Ie,n(m,{modelValue:s.value.gift_card,"onUpdate:modelValue":l[20]||(l[20]=e=>s.value.gift_card=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):d("",!0),i(p).rate_zero_status?(t(),a("div",Te,[Ae,n(m,{modelValue:s.value.rate_zero,"onUpdate:modelValue":l[21]||(l[21]=e=>s.value.rate_zero=e),type:"number",dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"])])):d("",!0),i(p).ice_status?(t(),a("div",Le,[Be,n(m,{modelValue:s.value.ice,"onUpdate:modelValue":l[22]||(l[22]=e=>s.value.ice=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):d("",!0)])]),_:1})]),_:1},8,["done","error"]),n(N,{name:3,title:"Contable",icon:"eva-pantone-outline",error:Object.keys(r.errors).length>0},{default:V(()=>[n(z,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:V(()=>[o("div",Ee,[Ge,o("div",He,[n(g,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[23]||(l[23]=e=>i(U).visit(i(q)("panel.accountability.manage.detail.index",[i(c).props.profile.id,i(c).props.accountability.id]))),flat:""}),n(g,{flat:"",color:"primary",onClick:l[24]||(l[24]=e=>y.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),n(g,{color:"primary",label:"Actualizar",size:"12px","no-caps":"",onClick:l[25]||(l[25]=e=>Q())})])]),o("div",Me,[o("div",Ze,[Je,n(x,{class:"input-theme",dense:"",outlined:"",options:v.value.projects,modelValue:s.value.project_code,"onUpdate:modelValue":l[26]||(l[26]=e=>s.value.project_code=e),"option-value":"PrjCode","option-label":"PrjCode","emit-value":"","map-options":""},null,8,["options","modelValue"])]),o("div",Ke,[We,n(x,{class:"input-theme",dense:"",outlined:"",options:v.value.distribution[1],modelValue:s.value.distribution_rule_one,"onUpdate:modelValue":l[27]||(l[27]=e=>s.value.distribution_rule_one=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":""},null,8,["options","modelValue"])]),o("div",Xe,[Ye,n(x,{class:"input-theme",dense:"",outlined:"",options:v.value.distribution[2],modelValue:s.value.distribution_rule_second,"onUpdate:modelValue":l[28]||(l[28]=e=>s.value.distribution_rule_second=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":""},null,8,["options","modelValue"])]),o("div",eo,[oo,n(x,{class:"input-theme",dense:"",outlined:"",options:v.value.distribution[3],modelValue:s.value.distribution_rule_three,"onUpdate:modelValue":l[29]||(l[29]=e=>s.value.distribution_rule_three=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":""},null,8,["options","modelValue"])]),o("div",lo,[so,n(x,{class:"input-theme",dense:"",outlined:"",options:v.value.distribution[4],modelValue:s.value.distribution_rule_four,"onUpdate:modelValue":l[30]||(l[30]=e=>s.value.distribution_rule_four=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":""},null,8,["options","modelValue"])]),o("div",to,[ao,n(x,{class:"input-theme",dense:"",outlined:"",options:v.value.distribution[5],modelValue:s.value.distribution_rule_five,"onUpdate:modelValue":l[31]||(l[31]=e=>s.value.distribution_rule_five=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":""},null,8,["options","modelValue"])])])]),_:1})]),_:1},8,["error"])]),_:1},8,["modelValue"])])])]),_:1})],64))}};export{mo as default};
