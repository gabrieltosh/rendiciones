import{d as D,e as M,u as R,f as U,Q as H,a as K,b as Y,c as Z}from"./use-quasar-055dc0b9.js";import{m as Q,p as z,r as k,a6 as G,a7 as J,a8 as W,j as X,v as r,x as ee,a9 as te,H as L,a3 as ae,aa as se,ab as ne,ac as oe,ad as le,n as ie,ae as re,q as ue,af as ce,s as T,ag as de,a5 as fe,o as _,l as me,w as u,ah as ve,a as n,b as l,i as A,t as q,Q as ge,c as h,u as B,F as C,Z as pe,ai as ye,h as E,f as N,g as j,z as _e,e as be,aj as he,O as xe}from"./app-7c3b4896.js";import{Q as O}from"./QPage-dbccf64a.js";import{_ as Se}from"./_plugin-vue_export-helper-c27b6911.js";const ke=Q({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:c,emit:d}){const b=z(),f=k(null);let a=0;const m=[];function x(t){const y=typeof t=="boolean"?t:e.noErrorFocus!==!0,w=++a,P=(s,v)=>{d("validation"+(s===!0?"Success":"Error"),v)},I=s=>{const v=s.validate();return typeof v.then=="function"?v.then(g=>({valid:g,comp:s}),g=>({valid:!1,comp:s,err:g})):Promise.resolve({valid:v,comp:s})};return(e.greedy===!0?Promise.all(m.map(I)).then(s=>s.filter(v=>v.valid!==!0)):m.reduce((s,v)=>s.then(()=>I(v).then(g=>{if(g.valid===!1)return Promise.reject(g)})),Promise.resolve()).catch(s=>[s])).then(s=>{if(s===void 0||s.length===0)return w===a&&P(!0),!0;if(w===a){const{comp:v,err:g}=s[0];if(g!==void 0&&console.error(g),P(!1,v),y===!0){const $=s.find(({comp:F})=>typeof F.focus=="function"&&te(F.$)===!1);$!==void 0&&$.comp.focus()}}return!1})}function S(){a++,m.forEach(t=>{typeof t.resetValidation=="function"&&t.resetValidation()})}function i(t){t!==void 0&&L(t);const y=a+1;x().then(w=>{y===a&&w===!0&&(e.onSubmit!==void 0?d("submit",t):t!==void 0&&t.target!==void 0&&typeof t.target.submit=="function"&&t.target.submit())})}function o(t){t!==void 0&&L(t),d("reset"),ae(()=>{S(),e.autofocus===!0&&e.noResetFocus!==!0&&p()})}function p(){se(()=>{if(f.value===null)return;const t=f.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||f.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||f.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(f.value.querySelectorAll("[tabindex]"),y=>y.tabIndex>-1);t!=null&&t.focus({preventScroll:!0})})}G(ne,{bindComponent(t){m.push(t)},unbindComponent(t){const y=m.indexOf(t);y>-1&&m.splice(y,1)}});let V=!1;return J(()=>{V=!0}),W(()=>{V===!0&&e.autofocus===!0&&p()}),X(()=>{e.autofocus===!0&&p()}),Object.assign(b.proxy,{validate:x,resetValidation:S,submit:i,reset:o,focus:p,getValidationComponents:()=>m}),()=>r("form",{class:"q-form",ref:f,onSubmit:i,onReset:o},ee(c.default))}}),we=[r("g",{fill:"none","fill-rule":"evenodd","stroke-width":"2"},[r("circle",{cx:"22",cy:"22",r:"1"},[r("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),r("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]),r("circle",{cx:"22",cy:"22",r:"1"},[r("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),r("animate",{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})])])],Ce=Q({name:"QSpinnerPuff",props:oe,setup(e){const{cSize:c,classes:d}=le(e);return()=>r("svg",{class:d.value,stroke:"currentColor",width:c.value,height:c.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg"},we)}}),qe=Q({name:"QInnerLoading",props:{...ie,...re,showing:Boolean,color:String,size:{type:[String,Number],default:42},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(e,{slots:c}){const d=z(),b=ue(e,d.proxy.$q),{transitionProps:f,transitionStyle:a}=ce(e),m=T(()=>"q-inner-loading absolute-full column flex-center"+(b.value===!0?" q-inner-loading--dark":"")),x=T(()=>"q-inner-loading__label"+(e.labelClass!==void 0?` ${e.labelClass}`:""));function S(){const o=[r(fe,{size:e.size,color:e.color})];return e.label!==void 0&&o.push(r("div",{class:x.value,style:e.labelStyle},[e.label])),o}function i(){return e.showing===!0?r("div",{class:m.value,style:a.value},c.default!==void 0?c.default():S()):null}return()=>r(de,f.value,i)}});const Qe={name:"Login"},Ve={class:"column"},Pe={class:"col"},Ie={class:"text-center q-pa-xs"},$e=l("strong",null,"TOMATE FÁCIL",-1);function Fe(e,c,d,b,f,a){return _(),me(M,{class:"backgroup-login-theme"},{default:u(()=>[ve(e.$slots,"default"),n(D,{class:"footer-theme"},{default:u(()=>[l("div",Ve,[l("div",Pe,[l("div",Ie,[A(" Copyright © "+q(new Date().getFullYear())+" ",1),$e,A(", Todos los derechos reservados. ")])])])]),_:1})]),_:3})}const Le=Se(Qe,[["render",Fe]]);const Te={class:"row"},Ae={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6 login-container"},Be=l("h4",{class:"title-login q-pa-none q-ma-none q-mb-sm"}," Iniciar Sesion ",-1),Ee=l("p",{class:"text-login q-pa-none q-ma-none"}," Ingresa tu correo y contraseña para iniciar sesion ",-1),Ne={key:0,class:"container-error"},je={key:1,class:"container-error"},Oe=l("div",{class:"q-pa-xs"},[l("a",{href:"#",class:"link-text"},"¿Olvidaste tu contraseña?")],-1),ze={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6 gt-sm image-container"},De=["src"],Ye={__name:"LoginAuth",props:{errors:Object,title:String},setup(e){const c=ge(),d=k(),b=k(),f=R(),a=k({email:null,password:null,accept:!0}),m=k(!1);function x(){xe.post("/login",a.value,{onSuccess:()=>{d.value=c.props.flash.message,b.value=c.props.flash.type,f.notify({type:b.value,message:d.value})}})}return(S,i)=>(_(),h(C,null,[n(B(pe),{title:e.title},null,8,["title"]),n(Le,null,{default:u(()=>[n(U,null,{default:u(()=>[l("div",Te,[l("div",Ae,[n(O,{class:"flex flex-center"},{default:u(()=>[n(ke,{onSubmit:i[3]||(i[3]=ye(o=>x(),["prevent"])),class:"q-gutter-md login-form"},{default:u(()=>[n(H,{class:"q-pb-sm"},{default:u(()=>[n(K,null,{default:u(()=>[n(Y,null,{default:u(()=>[n(Z,{class:"text-left"},{default:u(()=>[Be,Ee]),_:1})]),_:1})]),_:1})]),_:1}),n(E,{outlined:"",dense:"",modelValue:a.value.email,"onUpdate:modelValue":i[0]||(i[0]=o=>a.value.email=o),label:"Usuario *",autofocus:""},null,8,["modelValue"]),e.errors.email?(_(),h("div",Ne,[(_(!0),h(C,null,N(e.errors.email,(o,p)=>(_(),h("ul",{key:p,class:"message-error"},[l("li",null,q(o),1)]))),128))])):j("",!0),n(E,{outlined:"",dense:"",type:"password",modelValue:a.value.password,"onUpdate:modelValue":i[1]||(i[1]=o=>a.value.password=o),label:"Contraseña *","input-class":"input-theme"},null,8,["modelValue"]),e.errors.password?(_(),h("div",je,[(_(!0),h(C,null,N(e.errors.password,(o,p)=>(_(),h("ul",{key:p,class:"message-error"},[l("li",null,q(o),1)]))),128))])):j("",!0),n(_e,{modelValue:a.value.accept,"onUpdate:modelValue":i[2]||(i[2]=o=>a.value.accept=o),label:"Recuerdame",color:"primary"},null,8,["modelValue"]),l("div",null,[n(be,{class:"full-width",label:"Iniciar Sesion",type:"submit",color:"primary",size:"12px"})]),Oe]),_:1}),n(qe,{showing:m.value},{default:u(()=>[n(Ce,{size:"50px",color:"primary"})]),_:1},8,["showing"])]),_:1})]),l("div",ze,[n(O,{class:"flex flex-center q-pa-none q-ma-none"},{default:u(()=>[l("img",{src:B(he).isActive?"/images/login_dark.jpg":"/images/login.jpg",alt:""},null,8,De)]),_:1})])])]),_:1})]),_:1})],64))}};export{Ye as default};
