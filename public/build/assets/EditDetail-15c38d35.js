import{Q as S,r as C,j as T,o as t,c as a,a as n,u,w as V,F as _,Z as A,b as o,k as B,d as N,e as g,O as U,T as q,f as b,g as d,h as p,i as h,t as y}from"./app-ff754cd3.js";import{Q as x}from"./QSelect-b70db4a4.js";import{Q as E,a as $}from"./QStepper-5834ed88.js";import{_ as H}from"./MainLayout-810e0a2e.js";import{u as L}from"./use-quasar-9381415c.js";import"./QChip-2d7cd070.js";const G={class:"row justify-center q-px-md q-py-lg"},M={class:"col-xs-12 col-sm-12 col-md-9"},Z={class:"row"},J=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"}," Información General ")],-1),K={class:"col-sm-6 text-right q-gutter-sm"},W={class:"row q-col-gutter-md q-mt-xs"},X={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},Y=o("div",{class:"form-label",for:"device_name"},[h(" Cuenta "),o("span",{class:"text-red"},"*")],-1),ee={key:0,class:"container-error"},le={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},oe=o("div",{class:"form-label",for:"device_name"},[h(" Fecha "),o("span",{class:"text-red"},"*")],-1),se={key:0,class:"container-error"},te={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},ae=o("div",{class:"form-label",for:"device_name"},[h(" Tipo Documento "),o("span",{class:"text-red"},"*")],-1),ne={key:0,class:"container-error"},ie={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},re=o("div",{class:"form-label",for:"device_name"},[h(" Concepto "),o("span",{class:"text-red"},"*")],-1),ue={key:0,class:"container-error"},de={class:"row"},ce=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"},"Libro de Compras")],-1),me={class:"col-sm-6 text-right q-gutter-sm"},ve={class:"row q-col-gutter-md q-mt-xs"},pe={class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},_e=o("div",{class:"form-label",for:"device_name"},[h(" Nº Documento "),o("span",{class:"text-red"},"*")],-1),fe={key:0,class:"container-error"},be={key:0,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},ye=o("div",{class:"form-label",for:"device_name"}," Nº Autorización ",-1),Ve={key:0,class:"container-error"},ge={key:1,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},xe=o("div",{class:"form-label",for:"device_name"}," CUF ",-1),he={key:0,class:"container-error"},ke={key:2,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ce=o("div",{class:"form-label",for:"device_name"}," Codigo Control ",-1),Ue={key:0,class:"container-error"},qe={key:3,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},ze=o("div",{class:"form-label",for:"device_name"}," Razón Social ",-1),Ne={key:0,class:"container-error"},$e={key:4,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},je=o("div",{class:"form-label",for:"device_name"}," NIT ",-1),we={key:0,class:"container-error"},Qe={class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Fe=o("div",{class:"form-label",for:"device_name"},[h(" Importe "),o("span",{class:"text-red"},"*")],-1),Pe={key:0,class:"container-error"},De={class:"form-label",for:"device_name"},Ie=o("span",{class:"text-red"},"*",-1),Oe={key:0,class:"container-error"},Re={key:5,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Se=o("div",{class:"form-label",for:"device_name"}," Descuento ",-1),Te={key:0,class:"container-error"},Ae={key:6,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Be=o("div",{class:"form-label",for:"device_name"}," Exento ",-1),Ee={key:7,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},He=o("div",{class:"form-label",for:"device_name"}," Tasas ",-1),Le={key:8,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ge=o("div",{class:"form-label",for:"device_name"}," Gift Card ",-1),Me={key:9,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ze=o("div",{class:"form-label",for:"device_name"}," Tasa Cero ",-1),Je={key:10,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ke=o("div",{class:"form-label",for:"device_name"}," ICE ",-1),We={class:"row"},Xe=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"},"Datos Contables")],-1),Ye={class:"col-sm-6 text-right q-gutter-sm"},el={class:"row q-col-gutter-md q-mt-xs"},ll={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},ol=o("div",{class:"form-label",for:"device_name"}," Proyecto ",-1),sl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},tl=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 1 ",-1),al={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},nl=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 2 ",-1),il={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},rl=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 3 ",-1),ul={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},dl=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 4 ",-1),cl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},ml=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 5 ",-1),Vl={__name:"EditDetail",props:{title:String,errors:Object},setup(i){const Q=L(),m=S();let j=C(m.props.flash.message),w=C(m.props.flash.type),f=C({});const v=C({accounts:null,documents:m.props.documents,suppliers:m.props.suppliers,distribution:m.props.distribution,projects:m.props.projects});let k=C(1);const s=C(m.props.data);function F(){let c=null;c=v.value.suppliers.find(l=>l.nit==s.value.nit),s.value.business_name=c?c.business_name:s.value.business_name}function P(){let c=null;c=v.value.suppliers.find(l=>l.business_name==s.value.business_name),s.value.nit=c?c.nit:s.value.nit}function D(){U.post(q("panel.accountability.authorization.detail.update",[m.props.accountability.id]),s.value,{onSuccess:()=>{j.value=m.props.flash.message,w.value=m.props.flash.type,Q.notify({type:w.value,message:j.value})}})}function I(c,l){if(c===""){l(()=>{v.value.accounts=m.props.accounts});return}l(()=>{const e=c.toLowerCase();v.value.accounts=m.props.accounts.filter(r=>r.label.toLowerCase().indexOf(e)>-1)})}T(()=>{v.value.accounts=m.props.accounts,v.value.documents=m.props.documents,s.value.document_id=parseInt(s.value.document_id),f.value=v.value.documents.find(c=>c.id==s.value.document_id)});function O(){s.value.field=[],f.value=v.value.documents.find(c=>c.id==s.value.document_id),f.value.fields.forEach(c=>{s.value.field.push({name:c.name,value:null,id:c.id})})}return(c,l)=>(t(),a(_,null,[n(u(A),{title:i.title},null,8,["title"]),n(H,null,{default:V(()=>[o("div",G,[o("div",M,[n(E,{modelValue:u(k),"onUpdate:modelValue":l[34]||(l[34]=e=>B(k)?k.value=e:k=e),"header-nav":"",ref:"stepper",color:"primary",animated:"",flat:"","alternative-labels":"",class:"backgroup-theme"},{default:V(()=>[n($,{name:1,title:"General",icon:"settings",done:u(k)>1,error:Object.keys(i.errors).length>0},{default:V(()=>[n(N,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:V(()=>[o("div",Z,[J,o("div",K,[n(g,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[0]||(l[0]=e=>u(U).visit(u(q)("panel.accountability.authorization.detail.index",u(m).props.accountability.id))),flat:""}),n(g,{onClick:l[1]||(l[1]=e=>c.$refs.stepper.next()),color:"primary","no-caps":"",size:"12px",label:"Continuar"})])]),o("div",W,[o("div",X,[Y,n(x,{class:"input-theme",dense:"",outlined:"",options:v.value.accounts,modelValue:s.value.account,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value.account=e),"option-value":"account_code","option-label":"label","emit-value":"","map-options":"","use-input":"","input-debounce":"0",onFilter:I,clearable:""},null,8,["options","modelValue"]),i.errors.account?(t(),a("div",ee,[(t(!0),a(_,null,b(i.errors.account,(e,r)=>(t(),a("ul",{key:r,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)]),o("div",le,[oe,n(p,{modelValue:s.value.date,"onUpdate:modelValue":l[3]||(l[3]=e=>s.value.date=e),dense:"",outlined:"",type:"date",min:u(m).props.accountability.start_date,max:u(m).props.accountability.end_date,class:"input-theme"},null,8,["modelValue","min","max"]),i.errors.date?(t(),a("div",se,[(t(!0),a(_,null,b(i.errors.date,(e,r)=>(t(),a("ul",{key:r,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)]),o("div",te,[ae,n(x,{class:"input-theme",dense:"",outlined:"",options:v.value.documents,modelValue:s.value.document_id,"onUpdate:modelValue":[l[4]||(l[4]=e=>s.value.document_id=e),l[5]||(l[5]=e=>O())],"option-value":"id","option-label":"name","emit-value":"","map-options":""},null,8,["options","modelValue"]),i.errors.document_id?(t(),a("div",ne,[(t(!0),a(_,null,b(i.errors.document_id,(e,r)=>(t(),a("ul",{key:r,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)]),o("div",ie,[re,n(p,{modelValue:s.value.concept,"onUpdate:modelValue":l[6]||(l[6]=e=>s.value.concept=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.concept?(t(),a("div",ue,[(t(!0),a(_,null,b(i.errors.concept,(e,r)=>(t(),a("ul",{key:r,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)])])]),_:1})]),_:1},8,["done","error"]),n($,{name:2,title:"Libro Compras",icon:"eva-file-text-outline",done:u(k)>1,error:Object.keys(i.errors).length>0},{default:V(()=>[n(N,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:V(()=>[o("div",de,[ce,o("div",me,[n(g,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[7]||(l[7]=e=>u(U).visit(u(q)("panel.accountability.manage.detail.index",[u(m).props.profile.id,u(m).props.accountability.id]))),flat:""}),n(g,{flat:"",color:"primary",onClick:l[8]||(l[8]=e=>c.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),n(g,{onClick:l[9]||(l[9]=e=>c.$refs.stepper.next()),color:"primary","no-caps":"",size:"12px",label:"Continuar"})])]),o("div",ve,[o("div",pe,[_e,n(p,{modelValue:s.value.document_number,"onUpdate:modelValue":l[10]||(l[10]=e=>s.value.document_number=e),dense:"",outlined:"",class:"input-theme",type:"number"},null,8,["modelValue"]),i.errors.document_number?(t(),a("div",fe,[(t(!0),a(_,null,b(i.errors.document_number,(e,r)=>(t(),a("ul",{key:r,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)]),u(f).authorization_number_status?(t(),a("div",be,[ye,n(p,{modelValue:s.value.authorization_number,"onUpdate:modelValue":l[11]||(l[11]=e=>s.value.authorization_number=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.authorization_number?(t(),a("div",Ve,[(t(!0),a(_,null,b(i.errors.authorization_number,(e,r)=>(t(),a("ul",{key:r,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)])):d("",!0),u(f).cuf_status?(t(),a("div",ge,[xe,n(p,{modelValue:s.value.cuf,"onUpdate:modelValue":l[12]||(l[12]=e=>s.value.cuf=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.cuf?(t(),a("div",he,[(t(!0),a(_,null,b(i.errors.cuf,(e,r)=>(t(),a("ul",{key:r,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)])):d("",!0),u(f).control_code_status?(t(),a("div",ke,[Ce,n(p,{modelValue:s.value.control_code,"onUpdate:modelValue":l[13]||(l[13]=e=>s.value.control_code=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.control_code?(t(),a("div",Ue,[(t(!0),a(_,null,b(i.errors.control_code,(e,r)=>(t(),a("ul",{key:r,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)])):d("",!0),u(f).business_name_status?(t(),a("div",qe,[ze,n(p,{modelValue:s.value.business_name,"onUpdate:modelValue":[l[14]||(l[14]=e=>s.value.business_name=e),l[15]||(l[15]=e=>P())],dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.business_name?(t(),a("div",Ne,[(t(!0),a(_,null,b(i.errors.business_name,(e,r)=>(t(),a("ul",{key:r,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)])):d("",!0),u(f).nit_status?(t(),a("div",$e,[je,n(p,{modelValue:s.value.nit,"onUpdate:modelValue":[l[16]||(l[16]=e=>s.value.nit=e),l[17]||(l[17]=e=>F())],dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.nit?(t(),a("div",we,[(t(!0),a(_,null,b(i.errors.nit,(e,r)=>(t(),a("ul",{key:r,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)])):d("",!0),o("div",Qe,[Fe,n(p,{modelValue:s.value.amount,"onUpdate:modelValue":l[18]||(l[18]=e=>s.value.amount=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.amount?(t(),a("div",Pe,[(t(!0),a(_,null,b(i.errors.amount,(e,r)=>(t(),a("ul",{key:r,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)]),(t(!0),a(_,null,b(s.value.field,(e,r)=>(t(),a("div",{class:"col-xs-12 col-sm-12 col-md-6 col-lg-4",key:r},[o("div",De,[h(y(e.name)+" ",1),Ie]),n(p,{modelValue:e.value,"onUpdate:modelValue":z=>e.value=z,dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue","onUpdate:modelValue"]),i.errors["field."+r+".value"]?(t(),a("div",Oe,[(t(!0),a(_,null,b(i.errors["field."+r+".value"],(z,R)=>(t(),a("ul",{key:R,class:"message-error"},[o("li",null,y(z),1)]))),128))])):d("",!0)]))),128)),u(f).discount_status?(t(),a("div",Re,[Se,n(p,{modelValue:s.value.discount,"onUpdate:modelValue":l[19]||(l[19]=e=>s.value.discount=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.discount?(t(),a("div",Te,[(t(!0),a(_,null,b(i.errors.discount,(e,r)=>(t(),a("ul",{key:r,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)])):d("",!0),u(f).exento_status?(t(),a("div",Ae,[Be,n(p,{modelValue:s.value.excento,"onUpdate:modelValue":l[20]||(l[20]=e=>s.value.excento=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):d("",!0),u(f).tasas?(t(),a("div",Ee,[He,n(p,{modelValue:s.value.rate,"onUpdate:modelValue":l[21]||(l[21]=e=>s.value.rate=e),type:"number",dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"])])):d("",!0),u(f).gift_card_status?(t(),a("div",Le,[Ge,n(p,{modelValue:s.value.gift_card,"onUpdate:modelValue":l[22]||(l[22]=e=>s.value.gift_card=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):d("",!0),u(f).rate_zero_status?(t(),a("div",Me,[Ze,n(p,{modelValue:s.value.rate_zero,"onUpdate:modelValue":l[23]||(l[23]=e=>s.value.rate_zero=e),type:"number",dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"])])):d("",!0),u(f).ice_status?(t(),a("div",Je,[Ke,n(p,{modelValue:s.value.ice,"onUpdate:modelValue":l[24]||(l[24]=e=>s.value.ice=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):d("",!0)])]),_:1})]),_:1},8,["done","error"]),n($,{name:3,title:"Contable",icon:"eva-pantone-outline",error:Object.keys(i.errors).length>0},{default:V(()=>[n(N,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:V(()=>[o("div",We,[Xe,o("div",Ye,[n(g,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[25]||(l[25]=e=>u(U).visit(u(q)("panel.accountability.manage.detail.index",[u(m).props.profile.id,u(m).props.accountability.id]))),flat:""}),n(g,{flat:"",color:"primary",onClick:l[26]||(l[26]=e=>c.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),n(g,{color:"primary",label:"Actualizar",size:"12px","no-caps":"",onClick:l[27]||(l[27]=e=>D())})])]),o("div",el,[o("div",ll,[ol,n(x,{class:"input-theme",dense:"",outlined:"",options:v.value.projects,modelValue:s.value.project_code,"onUpdate:modelValue":l[28]||(l[28]=e=>s.value.project_code=e),"option-value":"PrjCode","option-label":"PrjCode","emit-value":"","map-options":""},null,8,["options","modelValue"])]),o("div",sl,[tl,n(x,{class:"input-theme",dense:"",outlined:"",options:v.value.distribution[1],modelValue:s.value.distribution_rule_one,"onUpdate:modelValue":l[29]||(l[29]=e=>s.value.distribution_rule_one=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":""},null,8,["options","modelValue"])]),o("div",al,[nl,n(x,{class:"input-theme",dense:"",outlined:"",options:v.value.distribution[2],modelValue:s.value.distribution_rule_second,"onUpdate:modelValue":l[30]||(l[30]=e=>s.value.distribution_rule_second=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":""},null,8,["options","modelValue"])]),o("div",il,[rl,n(x,{class:"input-theme",dense:"",outlined:"",options:v.value.distribution[3],modelValue:s.value.distribution_rule_three,"onUpdate:modelValue":l[31]||(l[31]=e=>s.value.distribution_rule_three=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":""},null,8,["options","modelValue"])]),o("div",ul,[dl,n(x,{class:"input-theme",dense:"",outlined:"",options:v.value.distribution[4],modelValue:s.value.distribution_rule_four,"onUpdate:modelValue":l[32]||(l[32]=e=>s.value.distribution_rule_four=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":""},null,8,["options","modelValue"])]),o("div",cl,[ml,n(x,{class:"input-theme",dense:"",outlined:"",options:v.value.distribution[5],modelValue:s.value.distribution_rule_five,"onUpdate:modelValue":l[33]||(l[33]=e=>s.value.distribution_rule_five=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":""},null,8,["options","modelValue"])])])]),_:1})]),_:1},8,["error"])]),_:1},8,["modelValue"])])])]),_:1})],64))}};export{Vl as default};
