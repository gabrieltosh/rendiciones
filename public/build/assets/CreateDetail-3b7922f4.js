import{Q as D,r as x,j as R,o as t,c as n,a,u as r,w as g,F as b,Z as T,b as o,k as B,d as z,e as V,O as U,T as q,l as I,g as c,f,h as v,i as C,t as y}from"./app-9c0252b0.js";import{Q as h}from"./QSelect-80838df8.js";import{Q as H,a as N}from"./QStepper-843f437b.js";import{_ as L}from"./MainLayout-9fb08ded.js";import{u as A}from"./use-quasar-b15c9383.js";const E={class:"row justify-center q-px-md q-py-lg"},G={class:"col-xs-12 col-sm-12 col-md-9"},M={class:"row"},Z=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"},"Información General")],-1),J={class:"col-sm-6 text-right q-gutter-sm"},K={class:"row q-col-gutter-md q-mt-xs"},W={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},X=o("div",{class:"form-label",for:"device_name"},[C(" Cuenta "),o("span",{class:"text-red"},"*")],-1),Y={key:0,class:"container-error"},ee={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},le=o("div",{class:"form-label",for:"device_name"},[C(" Fecha "),o("span",{class:"text-red"},"*")],-1),oe={key:0,class:"container-error"},se={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},te=o("div",{class:"form-label",for:"device_name"},[C(" Tipo Documento "),o("span",{class:"text-red"},"*")],-1),ne={key:0,class:"container-error"},ae={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},re=o("div",{class:"form-label",for:"device_name"},[C(" Concepto "),o("span",{class:"text-red"},"*")],-1),ie={key:0,class:"container-error"},ue={class:"row"},de=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"},"Libro de Compras")],-1),ce={class:"col-sm-6 text-right q-gutter-sm"},me={class:"row q-col-gutter-md q-mt-xs"},pe={class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},ve=o("div",{class:"form-label",for:"device_name"},[C(" Nº Documento "),o("span",{class:"text-red"},"*")],-1),_e={key:0,class:"container-error"},be={key:0,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},fe=o("div",{class:"form-label",for:"device_name"}," Nº Autorización ",-1),ye={key:0,class:"container-error"},ge={key:1,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ve=o("div",{class:"form-label",for:"device_name"}," CUF ",-1),he={key:0,class:"container-error"},xe={key:2,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},ke=o("div",{class:"form-label",for:"device_name"}," Codigo Control ",-1),Ce={key:0,class:"container-error"},Ue={key:3,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},qe=o("div",{class:"form-label",for:"device_name"}," Razón Social ",-1),ze={key:0,class:"container-error"},Ne={key:4,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},je=o("div",{class:"form-label",for:"device_name"}," NIT ",-1),$e={key:0,class:"container-error"},we={class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Oe=o("div",{class:"form-label",for:"device_name"},[C(" Importe "),o("span",{class:"text-red"},"*")],-1),Qe={key:0,class:"container-error"},Fe={key:5,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Pe=o("div",{class:"form-label",for:"device_name"}," Descuento ",-1),Se={key:0,class:"container-error"},De={key:6,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Re=o("div",{class:"form-label",for:"device_name"}," Exento ",-1),Te={key:7,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Be=o("div",{class:"form-label",for:"device_name"}," Tasas ",-1),Ie={key:8,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},He=o("div",{class:"form-label",for:"device_name"}," Gift Card ",-1),Le={key:9,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ae=o("div",{class:"form-label",for:"device_name"}," Tasa Cero ",-1),Ee={key:10,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ge=o("div",{class:"form-label",for:"device_name"}," ICE ",-1),Me={class:"row"},Ze=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"},"Datos Contables")],-1),Je={class:"col-sm-6 text-right q-gutter-sm"},Ke={class:"row q-col-gutter-md q-mt-xs"},We={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},Xe=o("div",{class:"form-label",for:"device_name"}," Proyecto ",-1),Ye={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},el=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 1 ",-1),ll={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},ol=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 2 ",-1),sl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},tl=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 3 ",-1),nl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},al=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 4 ",-1),rl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},il=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 5 ",-1),vl={__name:"CreateDetail",props:{title:String,errors:Object},setup(i){const w=A(),u=D();let j=x(u.props.flash.message),$=x(u.props.flash.type),p=x({});const _=x({accounts:null,documents:u.props.documents,suppliers:u.props.suppliers,distribution:u.props.distribution,projects:u.props.projects});x({card:!1});let k=x(1);const s=x({account:null,account_name:null,date:null,document_id:null,document_number:null,authorization_number:null,cuf:null,control_code:null,supplier_code:null,business_name:null,nit:null,concept:null,amount:null,discount:null,excento:null,rate:null,gift_card:null,rate_zero:null,ice:null,project_code:null,distribution_rule_one:null,distribution_rule_second:null,distribution_rule_three:null,distribution_rule_four:null,distribution_rule_five:null});function O(){let m=null;m=_.value.suppliers.find(l=>l.nit==s.value.nit),s.value.business_name=m?m.business_name:s.value.business_name}function Q(){let m=null;m=_.value.suppliers.find(l=>l.business_name==s.value.business_name),s.value.nit=m?m.nit:s.value.nit}function F(){U.post(q("panel.accountability.manage.detail.store",[u.props.profile.id,u.props.accountability.id]),s.value,{onSuccess:()=>{j.value=u.props.flash.message,$.value=u.props.flash.type,w.notify({type:$.value,message:j.value})}})}function P(m,l){if(m===""){l(()=>{_.value.accounts=u.props.accounts});return}l(()=>{const e=m.toLowerCase();_.value.accounts=u.props.accounts.filter(d=>d.label.toLowerCase().indexOf(e)>-1)})}R(()=>{s.value.distribution_rule_one=u.props.auth.user.distribution_rule_one,s.value.distribution_rule_second=u.props.auth.user.distribution_rule_second,s.value.distribution_rule_three=u.props.auth.user.distribution_rule_three,s.value.distribution_rule_four=u.props.auth.user.distribution_rule_four,s.value.distribution_rule_five=u.props.auth.user.distribution_rule_five});function S(){p.value=_.value.documents.find(m=>m.id==s.value.document_id)}return(m,l)=>(t(),n(b,null,[a(r(T),{title:i.title},null,8,["title"]),a(L,null,{default:g(()=>[o("div",E,[o("div",G,[a(H,{modelValue:r(k),"onUpdate:modelValue":l[34]||(l[34]=e=>B(k)?k.value=e:k=e),"header-nav":"",ref:"stepper",color:"primary",animated:"",flat:"","alternative-labels":"",class:"backgroup-theme"},{default:g(()=>[a(N,{name:1,title:"General",icon:"settings",done:r(k)>1,error:Object.keys(i.errors).length>0},{default:g(()=>[a(z,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:g(()=>[o("div",M,[Z,o("div",J,[a(V,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[0]||(l[0]=e=>r(U).visit(r(q)("panel.accountability.manage.detail.index",[r(u).props.profile.id,r(u).props.accountability.id]))),flat:""}),Object.keys(r(p)).length>0?(t(),I(V,{key:0,onClick:l[1]||(l[1]=e=>m.$refs.stepper.next()),color:"primary","no-caps":"",size:"12px",label:"Continuar"})):c("",!0)])]),o("div",K,[o("div",W,[X,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.accounts,modelValue:s.value.account,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value.account=e),"option-value":"account_code","option-label":"label","emit-value":"","map-options":"","use-input":"","input-debounce":"0",onFilter:P,clearable:""},null,8,["options","modelValue"]),i.errors.account?(t(),n("div",Y,[(t(!0),n(b,null,f(i.errors.account,(e,d)=>(t(),n("ul",{key:d,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)]),o("div",ee,[le,a(v,{modelValue:s.value.date,"onUpdate:modelValue":l[3]||(l[3]=e=>s.value.date=e),dense:"",outlined:"",type:"date",min:r(u).props.accountability.start_date,max:r(u).props.accountability.end_date,class:"input-theme"},null,8,["modelValue","min","max"]),i.errors.date?(t(),n("div",oe,[(t(!0),n(b,null,f(i.errors.date,(e,d)=>(t(),n("ul",{key:d,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)]),o("div",se,[te,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.documents,modelValue:s.value.document_id,"onUpdate:modelValue":[l[4]||(l[4]=e=>s.value.document_id=e),l[5]||(l[5]=e=>S())],"option-value":"id","option-label":"name","emit-value":"","map-options":""},null,8,["options","modelValue"]),i.errors.document_id?(t(),n("div",ne,[(t(!0),n(b,null,f(i.errors.document_id,(e,d)=>(t(),n("ul",{key:d,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)]),o("div",ae,[re,a(v,{modelValue:s.value.concept,"onUpdate:modelValue":l[6]||(l[6]=e=>s.value.concept=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.concept?(t(),n("div",ie,[(t(!0),n(b,null,f(i.errors.concept,(e,d)=>(t(),n("ul",{key:d,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])])]),_:1})]),_:1},8,["done","error"]),a(N,{name:2,title:"Libro Compras",icon:"eva-file-text-outline",done:r(k)>1,error:Object.keys(i.errors).length>0,disable:Object.keys(r(p)).length==0},{default:g(()=>[a(z,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:g(()=>[o("div",ue,[de,o("div",ce,[a(V,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[7]||(l[7]=e=>r(U).visit(r(q)("panel.accountability.manage.detail.index",[r(u).props.profile.id,r(u).props.accountability.id]))),flat:""}),a(V,{flat:"",color:"primary",onClick:l[8]||(l[8]=e=>m.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),a(V,{onClick:l[9]||(l[9]=e=>m.$refs.stepper.next()),color:"primary","no-caps":"",size:"12px",label:"Continuar"})])]),o("div",me,[o("div",pe,[ve,a(v,{modelValue:s.value.document_number,"onUpdate:modelValue":l[10]||(l[10]=e=>s.value.document_number=e),dense:"",outlined:"",class:"input-theme",type:"number"},null,8,["modelValue"]),i.errors.document_number?(t(),n("div",_e,[(t(!0),n(b,null,f(i.errors.document_number,(e,d)=>(t(),n("ul",{key:d,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)]),r(p).authorization_number_status?(t(),n("div",be,[fe,a(v,{modelValue:s.value.authorization_number,"onUpdate:modelValue":l[11]||(l[11]=e=>s.value.authorization_number=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.authorization_number?(t(),n("div",ye,[(t(!0),n(b,null,f(i.errors.authorization_number,(e,d)=>(t(),n("ul",{key:d,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),r(p).cuf_status?(t(),n("div",ge,[Ve,a(v,{modelValue:s.value.cuf,"onUpdate:modelValue":l[12]||(l[12]=e=>s.value.cuf=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.cuf?(t(),n("div",he,[(t(!0),n(b,null,f(i.errors.cuf,(e,d)=>(t(),n("ul",{key:d,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),r(p).control_code_status?(t(),n("div",xe,[ke,a(v,{modelValue:s.value.control_code,"onUpdate:modelValue":l[13]||(l[13]=e=>s.value.control_code=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.control_code?(t(),n("div",Ce,[(t(!0),n(b,null,f(i.errors.control_code,(e,d)=>(t(),n("ul",{key:d,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),r(p).business_name_status?(t(),n("div",Ue,[qe,a(v,{modelValue:s.value.business_name,"onUpdate:modelValue":[l[14]||(l[14]=e=>s.value.business_name=e),l[15]||(l[15]=e=>Q())],dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.business_name?(t(),n("div",ze,[(t(!0),n(b,null,f(i.errors.business_name,(e,d)=>(t(),n("ul",{key:d,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),r(p).nit_status?(t(),n("div",Ne,[je,a(v,{modelValue:s.value.nit,"onUpdate:modelValue":[l[16]||(l[16]=e=>s.value.nit=e),l[17]||(l[17]=e=>O())],dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.nit?(t(),n("div",$e,[(t(!0),n(b,null,f(i.errors.nit,(e,d)=>(t(),n("ul",{key:d,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),o("div",we,[Oe,a(v,{modelValue:s.value.amount,"onUpdate:modelValue":l[18]||(l[18]=e=>s.value.amount=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.amount?(t(),n("div",Qe,[(t(!0),n(b,null,f(i.errors.amount,(e,d)=>(t(),n("ul",{key:d,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)]),r(p).discount_status?(t(),n("div",Fe,[Pe,a(v,{modelValue:s.value.discount,"onUpdate:modelValue":l[19]||(l[19]=e=>s.value.discount=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.discount?(t(),n("div",Se,[(t(!0),n(b,null,f(i.errors.discount,(e,d)=>(t(),n("ul",{key:d,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),r(p).exento_status?(t(),n("div",De,[Re,a(v,{modelValue:s.value.excento,"onUpdate:modelValue":l[20]||(l[20]=e=>s.value.excento=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0),r(p).tasas?(t(),n("div",Te,[Be,a(v,{modelValue:s.value.rate,"onUpdate:modelValue":l[21]||(l[21]=e=>s.value.rate=e),type:"number",dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0),r(p).gift_card_status?(t(),n("div",Ie,[He,a(v,{modelValue:s.value.gift_card,"onUpdate:modelValue":l[22]||(l[22]=e=>s.value.gift_card=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0),r(p).rate_zero_status?(t(),n("div",Le,[Ae,a(v,{modelValue:s.value.rate_zero,"onUpdate:modelValue":l[23]||(l[23]=e=>s.value.rate_zero=e),type:"number",dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0),r(p).ice_status?(t(),n("div",Ee,[Ge,a(v,{modelValue:s.value.ice,"onUpdate:modelValue":l[24]||(l[24]=e=>s.value.ice=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0)])]),_:1})]),_:1},8,["done","error","disable"]),a(N,{name:3,title:"Contable",icon:"eva-pantone-outline",error:Object.keys(i.errors).length>0,disable:Object.keys(r(p)).length==0},{default:g(()=>[a(z,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:g(()=>[o("div",Me,[Ze,o("div",Je,[a(V,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[25]||(l[25]=e=>r(U).visit(r(q)("panel.accountability.manage.detail.index",[r(u).props.profile.id,r(u).props.accountability.id]))),flat:""}),a(V,{flat:"",color:"primary",onClick:l[26]||(l[26]=e=>m.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),a(V,{color:"primary",label:"Crear",size:"12px","no-caps":"",onClick:l[27]||(l[27]=e=>F())})])]),o("div",Ke,[o("div",We,[Xe,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.projects,modelValue:s.value.project_code,"onUpdate:modelValue":l[28]||(l[28]=e=>s.value.project_code=e),"option-value":"PrjCode","option-label":"PrjCode","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),o("div",Ye,[el,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.distribution[1],modelValue:s.value.distribution_rule_one,"onUpdate:modelValue":l[29]||(l[29]=e=>s.value.distribution_rule_one=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),o("div",ll,[ol,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.distribution[2],modelValue:s.value.distribution_rule_second,"onUpdate:modelValue":l[30]||(l[30]=e=>s.value.distribution_rule_second=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),o("div",sl,[tl,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.distribution[3],modelValue:s.value.distribution_rule_three,"onUpdate:modelValue":l[31]||(l[31]=e=>s.value.distribution_rule_three=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),o("div",nl,[al,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.distribution[4],modelValue:s.value.distribution_rule_four,"onUpdate:modelValue":l[32]||(l[32]=e=>s.value.distribution_rule_four=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),o("div",rl,[il,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.distribution[5],modelValue:s.value.distribution_rule_five,"onUpdate:modelValue":l[33]||(l[33]=e=>s.value.distribution_rule_five=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])])])]),_:1})]),_:1},8,["error","disable"])]),_:1},8,["modelValue"])])])]),_:1})],64))}};export{vl as default};
