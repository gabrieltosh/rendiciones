import{Q as D,r as x,j as R,o as t,c as n,a,u as i,w as V,F as b,Z as T,b as o,k as B,d as z,e as g,O as U,T as q,l as I,g as d,f,h as p,i as C,t as y}from"./app-ff754cd3.js";import{Q as h}from"./QSelect-b70db4a4.js";import{Q as H,a as N}from"./QStepper-5834ed88.js";import{_ as L}from"./MainLayout-810e0a2e.js";import{u as A}from"./use-quasar-9381415c.js";import"./QChip-2d7cd070.js";const E={class:"row justify-center q-px-md q-py-lg"},G={class:"col-xs-12 col-sm-12 col-md-9"},M={class:"row"},Z=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"},"Información General")],-1),J={class:"col-sm-6 text-right q-gutter-sm"},K={class:"row q-col-gutter-md q-mt-xs"},W={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},X=o("div",{class:"form-label",for:"device_name"},[C(" Cuenta "),o("span",{class:"text-red"},"*")],-1),Y={key:0,class:"container-error"},ee={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},le=o("div",{class:"form-label",for:"device_name"},[C(" Fecha "),o("span",{class:"text-red"},"*")],-1),oe={key:0,class:"container-error"},se={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},te=o("div",{class:"form-label",for:"device_name"},[C(" Tipo Documento "),o("span",{class:"text-red"},"*")],-1),ne={key:0,class:"container-error"},ae={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},ie=o("div",{class:"form-label",for:"device_name"},[C(" Concepto "),o("span",{class:"text-red"},"*")],-1),re={key:0,class:"container-error"},ue={class:"row"},de=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"},"Libro de Compras")],-1),ce={class:"col-sm-6 text-right q-gutter-sm"},me={class:"row q-col-gutter-md q-mt-xs"},ve={class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},pe=o("div",{class:"form-label",for:"device_name"},[C(" Nº Documento "),o("span",{class:"text-red"},"*")],-1),_e={key:0,class:"container-error"},be={key:0,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},fe=o("div",{class:"form-label",for:"device_name"}," Nº Autorización ",-1),ye={key:0,class:"container-error"},Ve={key:1,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},ge=o("div",{class:"form-label",for:"device_name"}," CUF ",-1),he={key:0,class:"container-error"},xe={key:2,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},ke=o("div",{class:"form-label",for:"device_name"}," Codigo Control ",-1),Ce={key:0,class:"container-error"},Ue={key:3,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},qe=o("div",{class:"form-label",for:"device_name"}," Razón Social ",-1),ze={key:0,class:"container-error"},Ne={key:4,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},je=o("div",{class:"form-label",for:"device_name"}," NIT ",-1),$e={key:0,class:"container-error"},we={class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Oe=o("div",{class:"form-label",for:"device_name"},[C(" Importe "),o("span",{class:"text-red"},"*")],-1),Qe={key:0,class:"container-error"},Fe={key:5,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Pe=o("div",{class:"form-label",for:"device_name"}," Descuento ",-1),Se={key:0,class:"container-error"},De={key:6,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Re=o("div",{class:"form-label",for:"device_name"}," Exento ",-1),Te={key:7,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Be=o("div",{class:"form-label",for:"device_name"}," Tasas ",-1),Ie={key:8,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},He=o("div",{class:"form-label",for:"device_name"}," Gift Card ",-1),Le={key:9,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ae=o("div",{class:"form-label",for:"device_name"}," Tasa Cero ",-1),Ee={key:10,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ge=o("div",{class:"form-label",for:"device_name"}," ICE ",-1),Me={class:"row"},Ze=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"},"Datos Contables")],-1),Je={class:"col-sm-6 text-right q-gutter-sm"},Ke={class:"row q-col-gutter-md q-mt-xs"},We={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},Xe=o("div",{class:"form-label",for:"device_name"}," Proyecto ",-1),Ye={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},el=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 1 ",-1),ll={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},ol=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 2 ",-1),sl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},tl=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 3 ",-1),nl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},al=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 4 ",-1),il={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},rl=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 5 ",-1),_l={__name:"CreateDetail",props:{title:String,errors:Object},setup(r){const w=A(),c=D();let j=x(c.props.flash.message),$=x(c.props.flash.type),v=x({});const _=x({accounts:null,documents:c.props.documents,suppliers:c.props.suppliers,distribution:c.props.distribution,projects:c.props.projects});x({card:!1});let k=x(1);const s=x({account:null,account_name:null,date:null,document_id:null,document_number:null,authorization_number:null,cuf:null,control_code:null,supplier_code:null,business_name:null,nit:null,concept:null,amount:null,discount:null,excento:null,rate:null,gift_card:null,rate_zero:null,ice:null,project_code:null,distribution_rule_one:null,distribution_rule_second:null,distribution_rule_three:null,distribution_rule_four:null,distribution_rule_five:null});function O(){let m=null;m=_.value.suppliers.find(l=>l.nit==s.value.nit),s.value.business_name=m?m.business_name:s.value.business_name}function Q(){let m=null;m=_.value.suppliers.find(l=>l.business_name==s.value.business_name),s.value.nit=m?m.nit:s.value.nit}function F(){U.post(q("panel.accountability.authorization.detail.store",[c.props.accountability.id]),s.value,{onSuccess:()=>{j.value=c.props.flash.message,$.value=c.props.flash.type,w.notify({type:$.value,message:j.value})}})}function P(m,l){if(m===""){l(()=>{_.value.accounts=c.props.accounts});return}l(()=>{const e=m.toLowerCase();_.value.accounts=c.props.accounts.filter(u=>u.label.toLowerCase().indexOf(e)>-1)})}R(()=>{s.value.distribution_rule_one=c.props.auth.user.distribution_rule_one,s.value.distribution_rule_second=c.props.auth.user.distribution_rule_second,s.value.distribution_rule_three=c.props.auth.user.distribution_rule_three,s.value.distribution_rule_four=c.props.auth.user.distribution_rule_four,s.value.distribution_rule_five=c.props.auth.user.distribution_rule_five});function S(){v.value=_.value.documents.find(m=>m.id==s.value.document_id)}return(m,l)=>(t(),n(b,null,[a(i(T),{title:r.title},null,8,["title"]),a(L,null,{default:V(()=>[o("div",E,[o("div",G,[a(H,{modelValue:i(k),"onUpdate:modelValue":l[34]||(l[34]=e=>B(k)?k.value=e:k=e),"header-nav":"",ref:"stepper",color:"primary",animated:"",flat:"","alternative-labels":"",class:"backgroup-theme"},{default:V(()=>[a(N,{name:1,title:"General",icon:"settings",done:i(k)>1,error:Object.keys(r.errors).length>0},{default:V(()=>[a(z,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:V(()=>[o("div",M,[Z,o("div",J,[a(g,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[0]||(l[0]=e=>i(U).visit(i(q)("panel.accountability.authorization.detail.index",i(c).props.accountability.id))),flat:""}),Object.keys(i(v)).length>0?(t(),I(g,{key:0,onClick:l[1]||(l[1]=e=>m.$refs.stepper.next()),color:"primary","no-caps":"",size:"12px",label:"Continuar"})):d("",!0)])]),o("div",K,[o("div",W,[X,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.accounts,modelValue:s.value.account,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value.account=e),"option-value":"account_code","option-label":"label","emit-value":"","map-options":"","use-input":"","input-debounce":"0",onFilter:P,clearable:""},null,8,["options","modelValue"]),r.errors.account?(t(),n("div",Y,[(t(!0),n(b,null,f(r.errors.account,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)]),o("div",ee,[le,a(p,{modelValue:s.value.date,"onUpdate:modelValue":l[3]||(l[3]=e=>s.value.date=e),dense:"",outlined:"",type:"date",min:i(c).props.accountability.start_date,max:i(c).props.accountability.end_date,class:"input-theme"},null,8,["modelValue","min","max"]),r.errors.date?(t(),n("div",oe,[(t(!0),n(b,null,f(r.errors.date,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)]),o("div",se,[te,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.documents,modelValue:s.value.document_id,"onUpdate:modelValue":[l[4]||(l[4]=e=>s.value.document_id=e),l[5]||(l[5]=e=>S())],"option-value":"id","option-label":"name","emit-value":"","map-options":""},null,8,["options","modelValue"]),r.errors.document_id?(t(),n("div",ne,[(t(!0),n(b,null,f(r.errors.document_id,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)]),o("div",ae,[ie,a(p,{modelValue:s.value.concept,"onUpdate:modelValue":l[6]||(l[6]=e=>s.value.concept=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.concept?(t(),n("div",re,[(t(!0),n(b,null,f(r.errors.concept,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)])])]),_:1})]),_:1},8,["done","error"]),a(N,{name:2,title:"Libro Compras",icon:"eva-file-text-outline",done:i(k)>1,error:Object.keys(r.errors).length>0,disable:Object.keys(i(v)).length==0},{default:V(()=>[a(z,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:V(()=>[o("div",ue,[de,o("div",ce,[a(g,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[7]||(l[7]=e=>i(U).visit(i(q)("panel.accountability.manage.detail.index",[i(c).props.profile.id,i(c).props.accountability.id]))),flat:""}),a(g,{flat:"",color:"primary",onClick:l[8]||(l[8]=e=>m.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),a(g,{onClick:l[9]||(l[9]=e=>m.$refs.stepper.next()),color:"primary","no-caps":"",size:"12px",label:"Continuar"})])]),o("div",me,[o("div",ve,[pe,a(p,{modelValue:s.value.document_number,"onUpdate:modelValue":l[10]||(l[10]=e=>s.value.document_number=e),dense:"",outlined:"",class:"input-theme",type:"number"},null,8,["modelValue"]),r.errors.document_number?(t(),n("div",_e,[(t(!0),n(b,null,f(r.errors.document_number,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)]),i(v).authorization_number_status?(t(),n("div",be,[fe,a(p,{modelValue:s.value.authorization_number,"onUpdate:modelValue":l[11]||(l[11]=e=>s.value.authorization_number=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.authorization_number?(t(),n("div",ye,[(t(!0),n(b,null,f(r.errors.authorization_number,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)])):d("",!0),i(v).cuf_status?(t(),n("div",Ve,[ge,a(p,{modelValue:s.value.cuf,"onUpdate:modelValue":l[12]||(l[12]=e=>s.value.cuf=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.cuf?(t(),n("div",he,[(t(!0),n(b,null,f(r.errors.cuf,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)])):d("",!0),i(v).control_code_status?(t(),n("div",xe,[ke,a(p,{modelValue:s.value.control_code,"onUpdate:modelValue":l[13]||(l[13]=e=>s.value.control_code=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.control_code?(t(),n("div",Ce,[(t(!0),n(b,null,f(r.errors.control_code,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)])):d("",!0),i(v).business_name_status?(t(),n("div",Ue,[qe,a(p,{modelValue:s.value.business_name,"onUpdate:modelValue":[l[14]||(l[14]=e=>s.value.business_name=e),l[15]||(l[15]=e=>Q())],dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.business_name?(t(),n("div",ze,[(t(!0),n(b,null,f(r.errors.business_name,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)])):d("",!0),i(v).nit_status?(t(),n("div",Ne,[je,a(p,{modelValue:s.value.nit,"onUpdate:modelValue":[l[16]||(l[16]=e=>s.value.nit=e),l[17]||(l[17]=e=>O())],dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.nit?(t(),n("div",$e,[(t(!0),n(b,null,f(r.errors.nit,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)])):d("",!0),o("div",we,[Oe,a(p,{modelValue:s.value.amount,"onUpdate:modelValue":l[18]||(l[18]=e=>s.value.amount=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.amount?(t(),n("div",Qe,[(t(!0),n(b,null,f(r.errors.amount,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)]),i(v).discount_status?(t(),n("div",Fe,[Pe,a(p,{modelValue:s.value.discount,"onUpdate:modelValue":l[19]||(l[19]=e=>s.value.discount=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.discount?(t(),n("div",Se,[(t(!0),n(b,null,f(r.errors.discount,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):d("",!0)])):d("",!0),i(v).exento_status?(t(),n("div",De,[Re,a(p,{modelValue:s.value.excento,"onUpdate:modelValue":l[20]||(l[20]=e=>s.value.excento=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):d("",!0),i(v).tasas?(t(),n("div",Te,[Be,a(p,{modelValue:s.value.rate,"onUpdate:modelValue":l[21]||(l[21]=e=>s.value.rate=e),type:"number",dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"])])):d("",!0),i(v).gift_card_status?(t(),n("div",Ie,[He,a(p,{modelValue:s.value.gift_card,"onUpdate:modelValue":l[22]||(l[22]=e=>s.value.gift_card=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):d("",!0),i(v).rate_zero_status?(t(),n("div",Le,[Ae,a(p,{modelValue:s.value.rate_zero,"onUpdate:modelValue":l[23]||(l[23]=e=>s.value.rate_zero=e),type:"number",dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"])])):d("",!0),i(v).ice_status?(t(),n("div",Ee,[Ge,a(p,{modelValue:s.value.ice,"onUpdate:modelValue":l[24]||(l[24]=e=>s.value.ice=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):d("",!0)])]),_:1})]),_:1},8,["done","error","disable"]),a(N,{name:3,title:"Contable",icon:"eva-pantone-outline",error:Object.keys(r.errors).length>0,disable:Object.keys(i(v)).length==0},{default:V(()=>[a(z,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:V(()=>[o("div",Me,[Ze,o("div",Je,[a(g,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[25]||(l[25]=e=>i(U).visit(i(q)("panel.accountability.manage.detail.index",[i(c).props.profile.id,i(c).props.accountability.id]))),flat:""}),a(g,{flat:"",color:"primary",onClick:l[26]||(l[26]=e=>m.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),a(g,{color:"primary",label:"Crear",size:"12px","no-caps":"",onClick:l[27]||(l[27]=e=>F())})])]),o("div",Ke,[o("div",We,[Xe,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.projects,modelValue:s.value.project_code,"onUpdate:modelValue":l[28]||(l[28]=e=>s.value.project_code=e),"option-value":"PrjCode","option-label":"PrjCode","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),o("div",Ye,[el,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.distribution[1],modelValue:s.value.distribution_rule_one,"onUpdate:modelValue":l[29]||(l[29]=e=>s.value.distribution_rule_one=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),o("div",ll,[ol,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.distribution[2],modelValue:s.value.distribution_rule_second,"onUpdate:modelValue":l[30]||(l[30]=e=>s.value.distribution_rule_second=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),o("div",sl,[tl,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.distribution[3],modelValue:s.value.distribution_rule_three,"onUpdate:modelValue":l[31]||(l[31]=e=>s.value.distribution_rule_three=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),o("div",nl,[al,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.distribution[4],modelValue:s.value.distribution_rule_four,"onUpdate:modelValue":l[32]||(l[32]=e=>s.value.distribution_rule_four=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),o("div",il,[rl,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.distribution[5],modelValue:s.value.distribution_rule_five,"onUpdate:modelValue":l[33]||(l[33]=e=>s.value.distribution_rule_five=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])])])]),_:1})]),_:1},8,["error","disable"])]),_:1},8,["modelValue"])])])]),_:1})],64))}};export{_l as default};
