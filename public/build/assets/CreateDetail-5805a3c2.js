import{Q as B,r as x,j as H,o as t,c as n,a,u as r,w as V,F as f,Z as I,b as o,k as A,d as z,e as g,O as U,T as q,l as E,g as c,f as b,h as p,i as k,t as y}from"./app-3fcf3b11.js";import{Q as h}from"./QSelect-a39ca06e.js";import{Q as G,a as N}from"./QStepper-d2e00a6f.js";import{_ as R}from"./MainLayout-1370bc59.js";import{u as M}from"./use-quasar-998014e7.js";import"./QChip-0e9a2d77.js";const Z={class:"row justify-center q-px-md q-py-lg"},J={class:"col-xs-12 col-sm-12 col-md-9"},K={class:"row"},W=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"},"Información General")],-1),X={class:"col-sm-6 text-right q-gutter-sm"},Y={class:"row q-col-gutter-md q-mt-xs"},ee={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},le=o("div",{class:"form-label",for:"device_name"},[k(" Cuenta "),o("span",{class:"text-red"},"*")],-1),oe={key:0,class:"container-error"},se={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},te=o("div",{class:"form-label",for:"device_name"},[k(" Fecha "),o("span",{class:"text-red"},"*")],-1),ne={key:0,class:"container-error"},ae={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},re=o("div",{class:"form-label",for:"device_name"},[k(" Tipo Documento "),o("span",{class:"text-red"},"*")],-1),ue={key:0,class:"container-error"},ie={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},de=o("div",{class:"form-label",for:"device_name"},[k(" Concepto "),o("span",{class:"text-red"},"*")],-1),ce={key:0,class:"container-error"},me={class:"row"},ve=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"},"Libro de Compras")],-1),pe={class:"col-sm-6 text-right q-gutter-sm"},_e={class:"row q-col-gutter-md q-mt-xs"},fe={class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},be=o("div",{class:"form-label",for:"device_name"},[k(" Nº Documento "),o("span",{class:"text-red"},"*")],-1),ye={key:0,class:"container-error"},Ve={key:0,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},ge=o("div",{class:"form-label",for:"device_name"}," Nº Autorización ",-1),he={key:0,class:"container-error"},xe={key:1,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},ke=o("div",{class:"form-label",for:"device_name"}," CUF ",-1),Ce={key:0,class:"container-error"},Ue={key:2,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},qe=o("div",{class:"form-label",for:"device_name"}," Codigo Control ",-1),je={key:0,class:"container-error"},ze={key:3,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ne=o("div",{class:"form-label",for:"device_name"}," Razón Social ",-1),$e={key:0,class:"container-error"},we={key:4,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Oe=o("div",{class:"form-label",for:"device_name"}," NIT ",-1),Fe={key:0,class:"container-error"},Pe={class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Qe=o("div",{class:"form-label",for:"device_name"},[k(" Importe "),o("span",{class:"text-red"},"*")],-1),Se={key:0,class:"container-error"},De={class:"form-label",for:"device_name"},Le=o("span",{class:"text-red"},"*",-1),Te={key:0,class:"container-error"},Be={key:5,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},He=o("div",{class:"form-label",for:"device_name"}," Descuento ",-1),Ie={key:0,class:"container-error"},Ae={key:6,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ee=o("div",{class:"form-label",for:"device_name"}," Exento ",-1),Ge={key:7,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Re=o("div",{class:"form-label",for:"device_name"}," Tasas ",-1),Me={key:8,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ze=o("div",{class:"form-label",for:"device_name"}," Gift Card ",-1),Je={key:9,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ke=o("div",{class:"form-label",for:"device_name"}," Tasa Cero ",-1),We={key:10,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Xe=o("div",{class:"form-label",for:"device_name"}," ICE ",-1),Ye={class:"row"},el=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"},"Datos Contables")],-1),ll={class:"col-sm-6 text-right q-gutter-sm"},ol={class:"row q-col-gutter-md q-mt-xs"},sl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},tl=o("div",{class:"form-label",for:"device_name"}," Proyecto ",-1),nl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},al=o("div",{class:"form-label",for:"device_name"}," Centro de Costo 1 ",-1),rl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},ul=o("div",{class:"form-label",for:"device_name"}," Centro de Costo 2 ",-1),il={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},dl=o("div",{class:"form-label",for:"device_name"}," Centro de Costo 3 ",-1),cl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},ml=o("div",{class:"form-label",for:"device_name"}," Centro de Costo 4 ",-1),vl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},pl=o("div",{class:"form-label",for:"device_name"}," Centro de Costo 5 ",-1),hl={__name:"CreateDetail",props:{title:String,errors:Object},setup(i){const O=M(),d=B();let $=x(d.props.flash.message),w=x(d.props.flash.type),v=x({});const _=x({accounts:null,documents:d.props.documents,suppliers:d.props.suppliers,distribution:d.props.distribution,projects:d.props.projects});x({card:!1});let C=x(1);const s=x({account:null,account_name:null,date:null,document_id:null,document_number:null,authorization_number:null,cuf:null,control_code:null,supplier_code:null,business_name:null,nit:null,concept:null,amount:null,discount:null,excento:null,rate:null,gift_card:null,rate_zero:null,ice:null,project_code:null,distribution_rule_one:null,distribution_rule_second:null,distribution_rule_three:null,distribution_rule_four:null,distribution_rule_five:null,field:[]});function F(){let m=null;m=_.value.suppliers.find(l=>l.nit==s.value.nit),s.value.business_name=m?m.business_name:s.value.business_name}function P(){let m=null;m=_.value.suppliers.find(l=>l.business_name==s.value.business_name),s.value.nit=m?m.nit:s.value.nit}function Q(){U.post(q("panel.accountability.manage.detail.store",[d.props.profile.id,d.props.accountability.id]),s.value,{onSuccess:()=>{$.value=d.props.flash.message,w.value=d.props.flash.type,O.notify({type:w.value,message:$.value})}})}function S(m,l){if(m===""){l(()=>{_.value.accounts=d.props.accounts});return}l(()=>{const e=m.toLowerCase();_.value.accounts=d.props.accounts.filter(u=>u.label.toLowerCase().indexOf(e)>-1)})}function D(m,l){if(m===""){l(()=>{_.value.projects=d.props.projects});return}l(()=>{const e=m.toLowerCase();_.value.projects=d.props.projects.filter(u=>u.PrjName.toLowerCase().indexOf(e)>-1)})}H(()=>{s.value.distribution_rule_one=d.props.auth.user.distribution_rule_one,s.value.distribution_rule_second=d.props.auth.user.distribution_rule_second,s.value.distribution_rule_three=d.props.auth.user.distribution_rule_three,s.value.distribution_rule_four=d.props.auth.user.distribution_rule_four,s.value.distribution_rule_five=d.props.auth.user.distribution_rule_five});function L(){s.value.field=[],v.value=_.value.documents.find(m=>m.id==s.value.document_id),v.value.fields.forEach(m=>{s.value.field.push({name:m.name,value:null,id:m.id})})}return(m,l)=>(t(),n(f,null,[a(r(I),{title:i.title},null,8,["title"]),a(R,null,{default:V(()=>[o("div",Z,[o("div",J,[a(G,{modelValue:r(C),"onUpdate:modelValue":l[34]||(l[34]=e=>A(C)?C.value=e:C=e),"header-nav":"",ref:"stepper",color:"primary",animated:"",flat:"","alternative-labels":"",class:"backgroup-theme"},{default:V(()=>[a(N,{name:1,title:"General",icon:"settings",done:r(C)>1,error:Object.keys(i.errors).length>0},{default:V(()=>[a(z,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:V(()=>[o("div",K,[W,o("div",X,[a(g,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[0]||(l[0]=e=>r(U).visit(r(q)("panel.accountability.manage.detail.index",[r(d).props.profile.id,r(d).props.accountability.id]))),flat:""}),Object.keys(r(v)).length>0?(t(),E(g,{key:0,onClick:l[1]||(l[1]=e=>m.$refs.stepper.next()),color:"primary","no-caps":"",size:"12px",label:"Continuar"})):c("",!0)])]),o("div",Y,[o("div",ee,[le,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.accounts,modelValue:s.value.account,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value.account=e),"option-value":"account_code","option-label":"label","emit-value":"","map-options":"","use-input":"","input-debounce":"0",onFilter:S,clearable:""},null,8,["options","modelValue"]),i.errors.account?(t(),n("div",oe,[(t(!0),n(f,null,b(i.errors.account,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)]),o("div",se,[te,a(p,{modelValue:s.value.date,"onUpdate:modelValue":l[3]||(l[3]=e=>s.value.date=e),dense:"",outlined:"",type:"date",min:r(d).props.accountability.start_date,max:r(d).props.accountability.end_date,class:"input-theme"},null,8,["modelValue","min","max"]),i.errors.date?(t(),n("div",ne,[(t(!0),n(f,null,b(i.errors.date,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)]),o("div",ae,[re,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.documents,modelValue:s.value.document_id,"onUpdate:modelValue":[l[4]||(l[4]=e=>s.value.document_id=e),l[5]||(l[5]=e=>L())],"option-value":"id","option-label":"name","emit-value":"","map-options":""},null,8,["options","modelValue"]),i.errors.document_id?(t(),n("div",ue,[(t(!0),n(f,null,b(i.errors.document_id,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)]),o("div",ie,[de,a(p,{modelValue:s.value.concept,"onUpdate:modelValue":l[6]||(l[6]=e=>s.value.concept=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.concept?(t(),n("div",ce,[(t(!0),n(f,null,b(i.errors.concept,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])])]),_:1})]),_:1},8,["done","error"]),a(N,{name:2,title:"Libro Compras",icon:"eva-file-text-outline",done:r(C)>1,error:Object.keys(i.errors).length>0,disable:Object.keys(r(v)).length==0},{default:V(()=>[a(z,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:V(()=>[o("div",me,[ve,o("div",pe,[a(g,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[7]||(l[7]=e=>r(U).visit(r(q)("panel.accountability.manage.detail.index",[r(d).props.profile.id,r(d).props.accountability.id]))),flat:""}),a(g,{flat:"",color:"primary",onClick:l[8]||(l[8]=e=>m.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),a(g,{onClick:l[9]||(l[9]=e=>m.$refs.stepper.next()),color:"primary","no-caps":"",size:"12px",label:"Continuar"})])]),o("div",_e,[o("div",fe,[be,a(p,{modelValue:s.value.document_number,"onUpdate:modelValue":l[10]||(l[10]=e=>s.value.document_number=e),dense:"",outlined:"",class:"input-theme",type:"number"},null,8,["modelValue"]),i.errors.document_number?(t(),n("div",ye,[(t(!0),n(f,null,b(i.errors.document_number,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)]),r(v).authorization_number_status?(t(),n("div",Ve,[ge,a(p,{modelValue:s.value.authorization_number,"onUpdate:modelValue":l[11]||(l[11]=e=>s.value.authorization_number=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.authorization_number?(t(),n("div",he,[(t(!0),n(f,null,b(i.errors.authorization_number,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),r(v).cuf_status?(t(),n("div",xe,[ke,a(p,{modelValue:s.value.cuf,"onUpdate:modelValue":l[12]||(l[12]=e=>s.value.cuf=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.cuf?(t(),n("div",Ce,[(t(!0),n(f,null,b(i.errors.cuf,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),r(v).control_code_status?(t(),n("div",Ue,[qe,a(p,{modelValue:s.value.control_code,"onUpdate:modelValue":l[13]||(l[13]=e=>s.value.control_code=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.control_code?(t(),n("div",je,[(t(!0),n(f,null,b(i.errors.control_code,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),r(v).business_name_status?(t(),n("div",ze,[Ne,a(p,{modelValue:s.value.business_name,"onUpdate:modelValue":[l[14]||(l[14]=e=>s.value.business_name=e),l[15]||(l[15]=e=>P())],dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.business_name?(t(),n("div",$e,[(t(!0),n(f,null,b(i.errors.business_name,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),r(v).nit_status?(t(),n("div",we,[Oe,a(p,{modelValue:s.value.nit,"onUpdate:modelValue":[l[16]||(l[16]=e=>s.value.nit=e),l[17]||(l[17]=e=>F())],dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.nit?(t(),n("div",Fe,[(t(!0),n(f,null,b(i.errors.nit,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),o("div",Pe,[Qe,a(p,{modelValue:s.value.amount,"onUpdate:modelValue":l[18]||(l[18]=e=>s.value.amount=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.amount?(t(),n("div",Se,[(t(!0),n(f,null,b(i.errors.amount,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)]),(t(!0),n(f,null,b(s.value.field,(e,u)=>(t(),n("div",{class:"col-xs-12 col-sm-12 col-md-6 col-lg-4",key:u},[o("div",De,[k(y(e.name)+" ",1),Le]),a(p,{modelValue:e.value,"onUpdate:modelValue":j=>e.value=j,dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue","onUpdate:modelValue"]),i.errors["field."+u+".value"]?(t(),n("div",Te,[(t(!0),n(f,null,b(i.errors["field."+u+".value"],(j,T)=>(t(),n("ul",{key:T,class:"message-error"},[o("li",null,y(j),1)]))),128))])):c("",!0)]))),128)),r(v).discount_status?(t(),n("div",Be,[He,a(p,{modelValue:s.value.discount,"onUpdate:modelValue":l[19]||(l[19]=e=>s.value.discount=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"]),i.errors.discount?(t(),n("div",Ie,[(t(!0),n(f,null,b(i.errors.discount,(e,u)=>(t(),n("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),r(v).exento_status?(t(),n("div",Ae,[Ee,a(p,{modelValue:s.value.excento,"onUpdate:modelValue":l[20]||(l[20]=e=>s.value.excento=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0),r(v).tasas?(t(),n("div",Ge,[Re,a(p,{modelValue:s.value.rate,"onUpdate:modelValue":l[21]||(l[21]=e=>s.value.rate=e),type:"number",dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0),r(v).gift_card_status?(t(),n("div",Me,[Ze,a(p,{modelValue:s.value.gift_card,"onUpdate:modelValue":l[22]||(l[22]=e=>s.value.gift_card=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0),r(v).rate_zero_status?(t(),n("div",Je,[Ke,a(p,{modelValue:s.value.rate_zero,"onUpdate:modelValue":l[23]||(l[23]=e=>s.value.rate_zero=e),type:"number",dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0),r(v).ice_status?(t(),n("div",We,[Xe,a(p,{modelValue:s.value.ice,"onUpdate:modelValue":l[24]||(l[24]=e=>s.value.ice=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0)])]),_:1})]),_:1},8,["done","error","disable"]),a(N,{name:3,title:"Contable",icon:"eva-pantone-outline",error:Object.keys(i.errors).length>0,disable:Object.keys(r(v)).length==0},{default:V(()=>[a(z,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:V(()=>[o("div",Ye,[el,o("div",ll,[a(g,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[25]||(l[25]=e=>r(U).visit(r(q)("panel.accountability.manage.detail.index",[r(d).props.profile.id,r(d).props.accountability.id]))),flat:""}),a(g,{flat:"",color:"primary",onClick:l[26]||(l[26]=e=>m.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),a(g,{color:"primary",label:"Crear",size:"12px","no-caps":"",onClick:l[27]||(l[27]=e=>Q())})])]),o("div",ol,[o("div",sl,[tl,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.projects,modelValue:s.value.project_code,"onUpdate:modelValue":l[28]||(l[28]=e=>s.value.project_code=e),"option-value":"PrjCode","option-label":"PrjName","emit-value":"","map-options":"","use-input":"","input-debounce":"0",onFilter:D,clearable:""},null,8,["options","modelValue"])]),o("div",nl,[al,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.distribution[1],modelValue:s.value.distribution_rule_one,"onUpdate:modelValue":l[29]||(l[29]=e=>s.value.distribution_rule_one=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),o("div",rl,[ul,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.distribution[2],modelValue:s.value.distribution_rule_second,"onUpdate:modelValue":l[30]||(l[30]=e=>s.value.distribution_rule_second=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),o("div",il,[dl,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.distribution[3],modelValue:s.value.distribution_rule_three,"onUpdate:modelValue":l[31]||(l[31]=e=>s.value.distribution_rule_three=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),o("div",cl,[ml,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.distribution[4],modelValue:s.value.distribution_rule_four,"onUpdate:modelValue":l[32]||(l[32]=e=>s.value.distribution_rule_four=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])]),o("div",vl,[pl,a(h,{class:"input-theme",dense:"",outlined:"",options:_.value.distribution[5],modelValue:s.value.distribution_rule_five,"onUpdate:modelValue":l[33]||(l[33]=e=>s.value.distribution_rule_five=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":"",clearable:""},null,8,["options","modelValue"])])])]),_:1})]),_:1},8,["error","disable"])]),_:1},8,["modelValue"])])])]),_:1})],64))}};export{hl as default};
