import{Q as I,r as h,j as O,o as t,c as a,a as n,u as i,w as g,F as f,Z as R,b as o,k as S,d as N,e as V,O as U,T as q,f as b,g as c,h as v,i as C,t as y}from"./app-9c0252b0.js";import{Q as x}from"./QSelect-80838df8.js";import{Q as T,a as $}from"./QStepper-843f437b.js";import{_ as B}from"./MainLayout-9fb08ded.js";import{u as H}from"./use-quasar-b15c9383.js";const L={class:"row justify-center q-px-md q-py-lg"},E={class:"col-xs-12 col-sm-12 col-md-9"},G={class:"row"},M=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"}," Información General ")],-1),Z={class:"col-sm-6 text-right q-gutter-sm"},J={class:"row q-col-gutter-md q-mt-xs"},K={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},W=o("div",{class:"form-label",for:"device_name"},[C(" Cuenta "),o("span",{class:"text-red"},"*")],-1),X={key:0,class:"container-error"},Y={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},ee=o("div",{class:"form-label",for:"device_name"},[C(" Fecha "),o("span",{class:"text-red"},"*")],-1),le={key:0,class:"container-error"},oe={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},se=o("div",{class:"form-label",for:"device_name"},[C(" Tipo Documento "),o("span",{class:"text-red"},"*")],-1),te={key:0,class:"container-error"},ae={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},ne=o("div",{class:"form-label",for:"device_name"},[C(" Concepto "),o("span",{class:"text-red"},"*")],-1),ie={key:0,class:"container-error"},re={class:"row"},ue=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"},"Libro de Compras")],-1),de={class:"col-sm-6 text-right q-gutter-sm"},ce={class:"row q-col-gutter-md q-mt-xs"},me={class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},pe=o("div",{class:"form-label",for:"device_name"},[C(" Nº Documento "),o("span",{class:"text-red"},"*")],-1),ve={key:0,class:"container-error"},_e={key:0,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},fe=o("div",{class:"form-label",for:"device_name"}," Nº Autorización ",-1),be={key:0,class:"container-error"},ye={key:1,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ve=o("div",{class:"form-label",for:"device_name"}," CUF ",-1),ge={key:0,class:"container-error"},xe={key:2,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},ke=o("div",{class:"form-label",for:"device_name"}," Codigo Control ",-1),he={key:0,class:"container-error"},Ce={key:3,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ue=o("div",{class:"form-label",for:"device_name"}," Razón Social ",-1),qe={key:0,class:"container-error"},ze={key:4,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ne=o("div",{class:"form-label",for:"device_name"}," NIT ",-1),$e={key:0,class:"container-error"},je={class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},we=o("div",{class:"form-label",for:"device_name"},[C(" Importe "),o("span",{class:"text-red"},"*")],-1),Qe={key:0,class:"container-error"},Fe={key:5,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Pe=o("div",{class:"form-label",for:"device_name"}," Descuento ",-1),Ae={key:0,class:"container-error"},De={key:6,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ie=o("div",{class:"form-label",for:"device_name"}," Exento ",-1),Oe={key:7,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Re=o("div",{class:"form-label",for:"device_name"}," Tasas ",-1),Se={key:8,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Te=o("div",{class:"form-label",for:"device_name"}," Gift Card ",-1),Be={key:9,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},He=o("div",{class:"form-label",for:"device_name"}," Tasa Cero ",-1),Le={key:10,class:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},Ee=o("div",{class:"form-label",for:"device_name"}," ICE ",-1),Ge={class:"row"},Me=o("div",{class:"col-sm-6"},[o("h5",{class:"title-form"},"Datos Contables")],-1),Ze={class:"col-sm-6 text-right q-gutter-sm"},Je={class:"row q-col-gutter-md q-mt-xs"},Ke={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},We=o("div",{class:"form-label",for:"device_name"}," Proyecto ",-1),Xe={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},Ye=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 1 ",-1),el={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},ll=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 2 ",-1),ol={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},sl=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 3 ",-1),tl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},al=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 4 ",-1),nl={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6"},il=o("div",{class:"form-label",for:"device_name"}," Norma Reparto 5 ",-1),pl={__name:"EditDetail",props:{title:String,errors:Object},setup(r){const Q=H(),d=I();let j=h(d.props.flash.message),w=h(d.props.flash.type),_=h({});const p=h({accounts:null,documents:d.props.documents,suppliers:d.props.suppliers,distribution:d.props.distribution,projects:d.props.projects});let k=h(1);const s=h(d.props.data);function F(){let m=null;m=p.value.suppliers.find(l=>l.nit==s.value.nit),s.value.business_name=m?m.business_name:s.value.business_name}function P(){let m=null;m=p.value.suppliers.find(l=>l.business_name==s.value.business_name),s.value.nit=m?m.nit:s.value.nit}function z(){U.post(q("panel.accountability.manage.detail.update",[d.props.profile.id,d.props.accountability.id]),s.value,{onSuccess:()=>{j.value=d.props.flash.message,w.value=d.props.flash.type,Q.notify({type:w.value,message:j.value})}})}function A(m,l){if(m===""){l(()=>{p.value.accounts=d.props.accounts});return}l(()=>{const e=m.toLowerCase();p.value.accounts=d.props.accounts.filter(u=>u.label.toLowerCase().indexOf(e)>-1)})}O(()=>{p.value.accounts=d.props.accounts,p.value.documents=d.props.documents,s.value.document_id=parseInt(s.value.document_id),_.value=p.value.documents.find(m=>m.id==s.value.document_id)});function D(){_.value=p.value.documents.find(m=>m.id==s.value.document_id)}return(m,l)=>(t(),a(f,null,[n(i(R),{title:r.title},null,8,["title"]),n(B,null,{default:g(()=>[o("div",L,[o("div",E,[n(T,{modelValue:i(k),"onUpdate:modelValue":l[36]||(l[36]=e=>S(k)?k.value=e:k=e),"header-nav":"",ref:"stepper",color:"primary",animated:"",flat:"","alternative-labels":"",class:"backgroup-theme"},{default:g(()=>[n($,{name:1,title:"General",icon:"settings",done:i(k)>1,error:Object.keys(r.errors).length>0},{default:g(()=>[n(N,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:g(()=>[o("div",G,[M,o("div",Z,[n(V,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[0]||(l[0]=e=>i(U).visit(i(q)("panel.accountability.manage.detail.index",[i(d).props.profile.id,i(d).props.accountability.id]))),flat:""}),n(V,{onClick:l[1]||(l[1]=e=>m.$refs.stepper.next()),color:"primary",outline:"","no-caps":"",size:"12px",label:"Continuar"}),n(V,{color:"primary",label:"Actualizar",size:"12px","no-caps":"",onClick:l[2]||(l[2]=e=>z())})])]),o("div",J,[o("div",K,[W,n(x,{class:"input-theme",dense:"",outlined:"",options:p.value.accounts,modelValue:s.value.account,"onUpdate:modelValue":l[3]||(l[3]=e=>s.value.account=e),"option-value":"account_code","option-label":"label","emit-value":"","map-options":"","use-input":"","input-debounce":"0",onFilter:A,clearable:""},null,8,["options","modelValue"]),r.errors.account?(t(),a("div",X,[(t(!0),a(f,null,b(r.errors.account,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)]),o("div",Y,[ee,n(v,{modelValue:s.value.date,"onUpdate:modelValue":l[4]||(l[4]=e=>s.value.date=e),dense:"",outlined:"",type:"date",min:i(d).props.accountability.start_date,max:i(d).props.accountability.end_date,class:"input-theme"},null,8,["modelValue","min","max"]),r.errors.date?(t(),a("div",le,[(t(!0),a(f,null,b(r.errors.date,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)]),o("div",oe,[se,n(x,{class:"input-theme",dense:"",outlined:"",options:p.value.documents,modelValue:s.value.document_id,"onUpdate:modelValue":[l[5]||(l[5]=e=>s.value.document_id=e),l[6]||(l[6]=e=>D())],"option-value":"id","option-label":"name","emit-value":"","map-options":""},null,8,["options","modelValue"]),r.errors.document_id?(t(),a("div",te,[(t(!0),a(f,null,b(r.errors.document_id,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)]),o("div",ae,[ne,n(v,{modelValue:s.value.concept,"onUpdate:modelValue":l[7]||(l[7]=e=>s.value.concept=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.concept?(t(),a("div",ie,[(t(!0),a(f,null,b(r.errors.concept,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])])]),_:1})]),_:1},8,["done","error"]),n($,{name:2,title:"Libro Compras",icon:"eva-file-text-outline",done:i(k)>1,error:Object.keys(r.errors).length>0},{default:g(()=>[n(N,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:g(()=>[o("div",re,[ue,o("div",de,[n(V,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[8]||(l[8]=e=>i(U).visit(i(q)("panel.accountability.manage.detail.index",[i(d).props.profile.id,i(d).props.accountability.id]))),flat:""}),n(V,{flat:"",color:"primary",onClick:l[9]||(l[9]=e=>m.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),n(V,{onClick:l[10]||(l[10]=e=>m.$refs.stepper.next()),color:"primary",outline:"","no-caps":"",size:"12px",label:"Continuar"}),n(V,{color:"primary",label:"Actualizar",size:"12px","no-caps":"",onClick:l[11]||(l[11]=e=>z())})])]),o("div",ce,[o("div",me,[pe,n(v,{modelValue:s.value.document_number,"onUpdate:modelValue":l[12]||(l[12]=e=>s.value.document_number=e),dense:"",outlined:"",class:"input-theme",type:"number"},null,8,["modelValue"]),r.errors.document_number?(t(),a("div",ve,[(t(!0),a(f,null,b(r.errors.document_number,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)]),i(_).authorization_number_status?(t(),a("div",_e,[fe,n(v,{modelValue:s.value.authorization_number,"onUpdate:modelValue":l[13]||(l[13]=e=>s.value.authorization_number=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.authorization_number?(t(),a("div",be,[(t(!0),a(f,null,b(r.errors.authorization_number,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),i(_).cuf_status?(t(),a("div",ye,[Ve,n(v,{modelValue:s.value.cuf,"onUpdate:modelValue":l[14]||(l[14]=e=>s.value.cuf=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.cuf?(t(),a("div",ge,[(t(!0),a(f,null,b(r.errors.cuf,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),i(_).control_code_status?(t(),a("div",xe,[ke,n(v,{modelValue:s.value.control_code,"onUpdate:modelValue":l[15]||(l[15]=e=>s.value.control_code=e),dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.control_code?(t(),a("div",he,[(t(!0),a(f,null,b(r.errors.control_code,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),i(_).business_name_status?(t(),a("div",Ce,[Ue,n(v,{modelValue:s.value.business_name,"onUpdate:modelValue":[l[16]||(l[16]=e=>s.value.business_name=e),l[17]||(l[17]=e=>P())],dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.business_name?(t(),a("div",qe,[(t(!0),a(f,null,b(r.errors.business_name,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),i(_).nit_status?(t(),a("div",ze,[Ne,n(v,{modelValue:s.value.nit,"onUpdate:modelValue":[l[18]||(l[18]=e=>s.value.nit=e),l[19]||(l[19]=e=>F())],dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.nit?(t(),a("div",$e,[(t(!0),a(f,null,b(r.errors.nit,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),o("div",je,[we,n(v,{modelValue:s.value.amount,"onUpdate:modelValue":l[20]||(l[20]=e=>s.value.amount=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.amount?(t(),a("div",Qe,[(t(!0),a(f,null,b(r.errors.amount,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)]),i(_).discount_status?(t(),a("div",Fe,[Pe,n(v,{modelValue:s.value.discount,"onUpdate:modelValue":l[21]||(l[21]=e=>s.value.discount=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"]),r.errors.discount?(t(),a("div",Ae,[(t(!0),a(f,null,b(r.errors.discount,(e,u)=>(t(),a("ul",{key:u,class:"message-error"},[o("li",null,y(e),1)]))),128))])):c("",!0)])):c("",!0),i(_).exento_status?(t(),a("div",De,[Ie,n(v,{modelValue:s.value.excento,"onUpdate:modelValue":l[22]||(l[22]=e=>s.value.excento=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0),i(_).tasas?(t(),a("div",Oe,[Re,n(v,{modelValue:s.value.rate,"onUpdate:modelValue":l[23]||(l[23]=e=>s.value.rate=e),type:"number",dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0),i(_).gift_card_status?(t(),a("div",Se,[Te,n(v,{modelValue:s.value.gift_card,"onUpdate:modelValue":l[24]||(l[24]=e=>s.value.gift_card=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0),i(_).rate_zero_status?(t(),a("div",Be,[He,n(v,{modelValue:s.value.rate_zero,"onUpdate:modelValue":l[25]||(l[25]=e=>s.value.rate_zero=e),type:"number",dense:"",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0),i(_).ice_status?(t(),a("div",Le,[Ee,n(v,{modelValue:s.value.ice,"onUpdate:modelValue":l[26]||(l[26]=e=>s.value.ice=e),dense:"",type:"number",outlined:"",class:"input-theme"},null,8,["modelValue"])])):c("",!0)])]),_:1})]),_:1},8,["done","error"]),n($,{name:3,title:"Contable",icon:"eva-pantone-outline",error:Object.keys(r.errors).length>0},{default:g(()=>[n(N,{class:"q-px-lg q-py-md q-ma-sm card-form q-mt-md"},{default:g(()=>[o("div",Ge,[Me,o("div",Ze,[n(V,{color:"secondary",label:"Cancelar",size:"12px","no-caps":"",onClick:l[27]||(l[27]=e=>i(U).visit(i(q)("panel.accountability.manage.detail.index",[i(d).props.profile.id,i(d).props.accountability.id]))),flat:""}),n(V,{flat:"",color:"primary",onClick:l[28]||(l[28]=e=>m.$refs.stepper.previous()),label:"Atras","no-caps":"",size:"12px"}),n(V,{color:"primary",label:"Actualizar",size:"12px","no-caps":"",onClick:l[29]||(l[29]=e=>z())})])]),o("div",Je,[o("div",Ke,[We,n(x,{class:"input-theme",dense:"",outlined:"",options:p.value.projects,modelValue:s.value.project_code,"onUpdate:modelValue":l[30]||(l[30]=e=>s.value.project_code=e),"option-value":"PrjCode","option-label":"PrjCode","emit-value":"","map-options":""},null,8,["options","modelValue"])]),o("div",Xe,[Ye,n(x,{class:"input-theme",dense:"",outlined:"",options:p.value.distribution[1],modelValue:s.value.distribution_rule_one,"onUpdate:modelValue":l[31]||(l[31]=e=>s.value.distribution_rule_one=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":""},null,8,["options","modelValue"])]),o("div",el,[ll,n(x,{class:"input-theme",dense:"",outlined:"",options:p.value.distribution[2],modelValue:s.value.distribution_rule_second,"onUpdate:modelValue":l[32]||(l[32]=e=>s.value.distribution_rule_second=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":""},null,8,["options","modelValue"])]),o("div",ol,[sl,n(x,{class:"input-theme",dense:"",outlined:"",options:p.value.distribution[3],modelValue:s.value.distribution_rule_three,"onUpdate:modelValue":l[33]||(l[33]=e=>s.value.distribution_rule_three=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":""},null,8,["options","modelValue"])]),o("div",tl,[al,n(x,{class:"input-theme",dense:"",outlined:"",options:p.value.distribution[4],modelValue:s.value.distribution_rule_four,"onUpdate:modelValue":l[34]||(l[34]=e=>s.value.distribution_rule_four=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":""},null,8,["options","modelValue"])]),o("div",nl,[il,n(x,{class:"input-theme",dense:"",outlined:"",options:p.value.distribution[5],modelValue:s.value.distribution_rule_five,"onUpdate:modelValue":l[35]||(l[35]=e=>s.value.distribution_rule_five=e),"option-value":"PrcCode","option-label":"Name","emit-value":"","map-options":""},null,8,["options","modelValue"])])])]),_:1})]),_:1},8,["error"])]),_:1},8,["modelValue"])])])]),_:1})],64))}};export{pl as default};
